<!-- Complete Enhanced Fintpe Account Management -->
<section class="account-section">
    <div class="account-container">
        <!-- Profile Header -->
        <div class="profile-header">
            <div class="profile-avatar">
                <div class="avatar-circle" id="userAvatar">
                    <span id="avatarInitials">U</span>
                </div>
            </div>
            <div class="profile-info">
                <h1 class="profile-name" id="profileDisplayName">Hi, User</h1>
                <div class="account-status-alert">
                    <i class="fas fa-exclamation-triangle"></i>
                    <span>Complete your financial profile to unlock all investment and banking features.</span>
                    <button onclick="openProfileSetupModal()" class="btn-complete">Complete Setup</button>
                </div>
            </div>
        </div>

        <!-- Enhanced Settings Section with iOS Toggle Switches -->
        <div class="settings-toggle-section">
            <h2 style="margin-bottom: 2rem; color: var(--text-primary);">Settings & Preferences</h2>
            
            <div class="toggle-setting-item">
                <div class="toggle-setting-info">
                    <h3>Privacy mode</h3>
                    <p>Hide sensitive financial information with blur effect. When enabled, all amounts and balances will be hidden across the app.</p>
                </div>
                <button class="ios-toggle" id="privacyToggle" onclick="togglePrivacyMode()">
                    <div class="ios-toggle-slider"></div>
                </button>
            </div>

            <div class="toggle-setting-item">
                <div class="toggle-setting-info">
                    <h3>Dark theme</h3>
                    <p>Switch between light and dark theme for comfortable viewing. Dark theme reduces eye strain in low-light conditions.</p>
                </div>
                <button class="ios-toggle" id="themeToggle" onclick="toggleTheme()">
                    <div class="ios-toggle-slider"></div>
                </button>
            </div>

            <div class="toggle-setting-item">
                <div class="toggle-setting-info">
                    <h3>Email notifications</h3>
                    <p>Receive email notifications for important account activities, transactions, and updates.</p>
                </div>
                <button class="ios-toggle active" id="emailToggle" onclick="toggleEmailNotifications()">
                    <div class="ios-toggle-slider"></div>
                </button>
            </div>

            <div class="toggle-setting-item">
                <div class="toggle-setting-info">
                    <h3>SMS alerts</h3>
                    <p>Get SMS alerts for transactions, low balance warnings, and security notifications.</p>
                </div>
                <button class="ios-toggle active" id="smsToggle" onclick="toggleSmsAlerts()">
                    <div class="ios-toggle-slider"></div>
                </button>
            </div>
        </div>

        <!-- Family Account Section with Toggle View -->
        <div class="family-section">
            <h2 style="margin-bottom: 1rem; color: var(--text-primary);">Family Account</h2>
            <p style="color: var(--text-secondary); margin-bottom: 1.5rem;">View your individual dashboard or switch to family view to see combined wealth and invite family members.</p>
            
            <button class="family-toggle-button" id="familyViewToggle" onclick="toggleFamilyView()">
                Switch to Family View
            </button>
            
            <!-- Individual Dashboard (Default) -->
            <div id="individualDashboard">
                <h3 style="color: var(--text-primary); margin-bottom: 1rem;">Your Personal Dashboard</h3>
                <div class="dashboard-cards">
                    <div class="dashboard-card">
                        <div class="card-header">
                            <span class="card-title">YOUR BALANCE</span>
                            <i class="fas fa-wallet" style="color: var(--primary);"></i>
                        </div>
                        <div class="card-amount" data-private="₹5,93,672" data-placeholder="₹••••••">₹5,93,672</div>
                        <div class="card-change positive">
                            <i class="fas fa-arrow-up"></i>
                            +12.5% this month
                        </div>
                    </div>

                    <div class="dashboard-card">
                        <div class="card-header">
                            <span class="card-title">YOUR INVESTMENTS</span>
                            <i class="fas fa-chart-line" style="color: var(--success);"></i>
                        </div>
                        <div class="card-amount" data-private="₹1,85,920" data-placeholder="₹••••••">₹1,85,920</div>
                        <div class="card-change positive">
                            <i class="fas fa-arrow-up"></i>
                            +8.7% this year
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Family Dashboard (Hidden by default) -->
            <div id="familyDashboard" class="family-view">
                <h3 style="color: var(--text-primary); margin-bottom: 1rem;">Family Wealth Overview</h3>
                
                <!-- Combined Family Stats -->
                <div class="dashboard-card" style="margin-bottom: 2rem;">
                    <div class="card-header">
                        <span class="card-title">COMBINED FAMILY WEALTH</span>
                        <i class="fas fa-users" style="color: var(--primary);"></i>
                    </div>
                    <div class="card-amount" data-private="₹12,45,890" data-placeholder="₹•••••••">₹12,45,890</div>
                    <div class="card-change positive">
                        <i class="fas fa-arrow-up"></i>
                        +18.3% combined growth
                    </div>
                </div>
                
                <h4 style="color: var(--text-primary); margin-bottom: 1rem;">Family Members</h4>
                <div class="family-members-grid" id="familyMembersContainer">
                    <!-- Family members will be loaded here by JavaScript -->
                </div>
            </div>
        </div>

        <!-- Account Management Grid -->
        <div class="account-grid-header">
            <h2>My Account</h2>
        </div>

        <div class="account-management-grid">
            <!-- Row 1 -->
            <div class="account-card" onclick="openBankAccounts()">
                <div class="card-icon" style="color: #059669;">
                    <i class="fas fa-university"></i>
                </div>
                <div class="card-content">
                    <h3>Bank Accounts</h3>
                    <p>Manage linked bank accounts & balances</p>
                </div>
            </div>

            <div class="account-card" onclick="openMyProfile()">
                <div class="card-icon" style="color: #3b82f6;">
                    <i class="fas fa-user-circle"></i>
                </div>
                <div class="card-content">
                    <h3>My Profile</h3>
                    <p>Personal details, contact & address</p>
                </div>
            </div>

            <!-- Row 2 -->
            <div class="account-card" onclick="openInsurance()">
                <div class="card-icon" style="color: #10b981;">
                    <i class="fas fa-shield-alt"></i>
                </div>
                <div class="card-content">
                    <h3>Insurance</h3>
                    <p>Health, Life, Motor insurance policies</p>
                </div>
            </div>

            <div class="account-card" onclick="openRealEstateGold()">
                <div class="card-icon" style="color: #f59e0b;">
                    <i class="fas fa-home"></i>
                </div>
                <div class="card-content">
                    <h3>Real Estate & Gold</h3>
                    <p>Property & gold investment tracking</p>
                </div>
            </div>

            <!-- Row 3 -->
            <div class="account-card" onclick="openPasswordSecurity()">
                <div class="card-icon" style="color: #dc2626;">
                    <i class="fas fa-lock"></i>
                </div>
                <div class="card-content">
                    <h3>Password & Security</h3>
                    <p>Change password, 2FA & security settings</p>
                </div>
            </div>

            <div class="account-card" onclick="openInvestments()">
                <div class="card-icon" style="color: #8b5cf6;">
                    <i class="fas fa-chart-line"></i>
                </div>
                <div class="card-content">
                    <h3>Investments</h3>
                    <p>Mutual funds, SIPs & portfolio tracking</p>
                </div>
            </div>

            <!-- Row 4 -->
            <div class="account-card" onclick="openAuthorizations()">
                <div class="card-icon" style="color: #06b6d4;">
                    <i class="fas fa-key"></i>
                </div>
                <div class="card-content">
                    <h3>Authorizations</h3>
                    <p>API access, third-party permissions</p>
                </div>
            </div>

            <div class="account-card" onclick="openCalendarReminders()">
                <div class="card-icon" style="color: #84cc16;">
                    <i class="fas fa-calendar-alt"></i>
                </div>
                <div class="card-content">
                    <h3>Calendar & Reminders</h3>
                    <p>SIP dates, bill payments & notifications</p>
                </div>
            </div>
        </div>
         
        <!-- Quick Actions -->
        <div class="quick-actions">
            <h3>Quick Actions</h3>
            <div class="quick-actions-grid">
                <button onclick="loadDashboard()" class="quick-action-btn">
                    <i class="fas fa-chart-line"></i>
                    <span>Dashboard</span>
                </button>
                <button onclick="exportAccountData()" class="quick-action-btn">
                    <i class="fas fa-download"></i>
                    <span>Export Data</span>
                </button>
                <button onclick="openSupportChat()" class="quick-action-btn">
                    <i class="fas fa-headset"></i>
                    <span>Support</span>
                </button>
                <button onclick="logout()" class="quick-action-btn danger">
                    <i class="fas fa-sign-out-alt"></i>
                    <span>Logout</span>
                </button>
            </div>
        </div>
    </div>
</section>

<!-- Profile Setup Progress Modal -->
<div id="profileSetupModal" class="modal" style="display: none;">
    <div class="modal-content" style="max-width: 600px;">
        <div class="modal-header" style="background: linear-gradient(135deg, var(--primary), var(--primary-dark));">
            <span class="close" onclick="closeProfileSetupModal()">&times;</span>
            <h2>Complete Your Financial Profile</h2>
            <p>Finish setting up your account for full access to all features</p>
        </div>
        <div class="modal-body">
            <div class="setup-progress">
                <h3>Setup Progress</h3>
                <div class="progress-bar">
                    <div class="progress-fill" id="setupProgress" style="width: 40%;"></div>
                </div>
                <p><span id="progressPercentage">40</span>% Complete</p>
            </div>

            <div class="setup-checklist">
                <div class="setup-item completed" onclick="openMyProfile()">
                    <i class="fas fa-check-circle"></i>
                    <span>Email Verification ✓</span>
                </div>
                <div class="setup-item" onclick="openMyProfile()">
                    <i class="fas fa-circle"></i>
                    <span>Complete Profile Information</span>
                </div>
                <div class="setup-item" onclick="openBankAccounts()">
                    <i class="fas fa-circle"></i>
                    <span>Add Bank Accounts</span>
                </div>
                <div class="setup-item" onclick="openInvestments()">
                    <i class="fas fa-circle"></i>
                    <span>Set Investment Goals</span>
                </div>
                <div class="setup-item" onclick="openPasswordSecurity()">
                    <i class="fas fa-circle"></i>
                    <span>Enable 2-Factor Authentication</span>
                </div>
            </div>

            <div class="setup-actions">
                <button onclick="closeProfileSetupModal()" class="btn btn-secondary">
                    Complete Later
                </button>
                <button onclick="startProfileSetup()" class="btn btn-primary">
                    Continue Setup
                </button>
            </div>
        </div>
    </div>
</div>

<!-- Section Detail Modals -->
<div id="sectionDetailModal" class="modal" style="display: none;">
    <div class="modal-content" style="max-width: 800px;">
        <div class="modal-header" id="sectionModalHeader">
            <span class="close" onclick="closeSectionModal()">&times;</span>
            <h2 id="sectionModalTitle">Section Title</h2>
            <p id="sectionModalSubtitle">Section description</p>
        </div>
        <div class="modal-body" id="sectionModalBody">
            <!-- Dynamic content will be loaded here -->
        </div>
    </div>
</div>