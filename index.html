<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fintpe - DIY Personal Finance | Track Net Worth, Assets & Investments</title>
    <meta name="description" content="Your money. Your way. Your data. A privacy-first personal finance platform to track net worth, assets, and investments. No clutter, no spam, no tracking.">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        /* Include your main.css styles here */
        :root {
            --primary: #2563eb;
            --primary-dark: #1d4ed8;
            --primary-light: #3b82f6;
            --secondary: #059669;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #dc2626;
            --dark: #0f172a;
            --light: #f8fafc;
            --white: #ffffff;
            --text-primary: #0f172a;
            --text-secondary: #64748b;
            --text-muted: #94a3b8;
            --border: #e2e8f0;
            --border-light: #f1f5f9;

            /* Modern additions */
            --gradient-primary: linear-gradient(135deg, #2563eb 0%, #7c3aed 100%);
            --gradient-subtle: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
            --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
            --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
            --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
            --shadow-xl: 0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.1);
            --radius-sm: 6px;
            --radius-md: 10px;
            --radius-lg: 16px;
            --radius-xl: 24px;
            --transition-fast: 150ms cubic-bezier(0.4, 0, 0.2, 1);
            --transition-base: 200ms cubic-bezier(0.4, 0, 0.2, 1);
            --transition-slow: 300ms cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* Dark Mode Variables */
        [data-theme="dark"] {
            --primary: #3b82f6;
            --primary-dark: #2563eb;
            --primary-light: #60a5fa;
            --secondary: #059669;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #dc2626;
            --dark: #0f172a;
            --light: #1e293b;
            --white: #334155;
            --text-primary: #f1f5f9;
            --text-secondary: #cbd5e1;
            --text-muted: #94a3b8;
            --border: #475569;
            --border-light: #334155;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            color: var(--text-primary);
            background-color: var(--white);
            transition: all 0.3s ease;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        ::selection {
            background: var(--primary);
            color: white;
        }

        /* Navigation */
        .navbar {
            position: fixed;
            top: 0;
            width: 100%;
            z-index: 1000;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid var(--border);
        }

        .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 2rem;
        }

        .logo-container {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .logo {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--primary);
            text-decoration: none;
        }

        .coming-soon-badge {
            background: linear-gradient(45deg, var(--primary), var(--secondary));
            color: white;
            padding: 0.25rem 0.75rem;
            border-radius: 15px;
            font-size: 0.7rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .nav-menu {
            display: flex;
            list-style: none;
            gap: 2rem;
            align-items: center;
        }

        .nav-link {
            text-decoration: none;
            color: var(--text-primary);
            font-weight: 500;
            transition: color 0.3s ease;
            background: none;
            border: none;
            cursor: pointer;
        }

        .nav-link:hover {
            color: var(--primary);
        }

        .login-btn {
            background: var(--primary);
            color: white;
            padding: 0.5rem 1.5rem;
            border-radius: 6px;
            text-decoration: none;
            font-weight: 500;
            transition: all 0.3s ease;
            cursor: pointer;
            border: none;
        }

        .login-btn:hover {
            background: var(--primary-dark);
        }

        .mobile-toggle {
            display: none;
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
        }

        /* Hero Section */
        .hero {
            padding: 8rem 2rem 6rem;
            text-align: center;
            background: var(--white);
        }

        .hero-content {
            max-width: 800px;
            margin: 0 auto;
        }

        .hero-title {
            font-size: clamp(2.5rem, 6vw, 4rem);
            font-weight: 800;
            margin-bottom: 1.5rem;
            color: var(--text-primary);
        }

        .hero-subtitle {
            font-size: 1.2rem;
            margin-bottom: 3rem;
            color: var(--text-secondary);
        }

        .cta-buttons {
            display: flex;
            gap: 1rem;
            justify-content: center;
            flex-wrap: wrap;
            margin-bottom: 4rem;
        }

        /* Buttons */
        .btn {
            padding: 1rem 2rem;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-primary {
            background: var(--primary);
            color: white;
        }

        .btn-primary:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
        }

        .btn-secondary {
            background: white;
            color: var(--primary);
            border: 2px solid var(--primary);
        }

        .btn-secondary:hover {
            background: var(--primary);
            color: white;
        }

        /* Modals */
        .modal, .service-modal {
            display: none;
            position: fixed;
            z-index: 2000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(5px);
        }

        .modal-content, .service-modal-content {
            background-color: var(--white);
            margin: 5% auto;
            padding: 0;
            border-radius: 16px;
            width: 90%;
            max-width: 450px;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.25);
            overflow: hidden;
        }

        .service-modal-content {
            max-width: 800px;
            max-height: 90vh;
            overflow-y: auto;
        }

        .modal-header, .service-modal-header {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            padding: 2rem;
            text-align: center;
            position: relative;
        }

        .service-modal-header {
            border-bottom: 1px solid var(--border);
            position: sticky;
            top: 0;
            z-index: 10;
        }

        .modal-body, .service-modal-body {
            padding: 2rem;
        }

        .close {
            position: absolute;
            right: 1rem;
            top: 1rem;
            color: white;
            font-size: 1.5rem;
            font-weight: bold;
            cursor: pointer;
            background: rgba(255, 255, 255, 0.2);
            width: 35px;
            height: 35px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background 0.3s ease;
        }

        .close:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        /* Login Form */
        .login-form {
            display: grid;
            gap: 1.5rem;
        }

        .form-group {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .form-group label {
            font-weight: 500;
            color: var(--text-primary);
        }

        .form-group input {
            padding: 0.75rem;
            border: 1px solid var(--border);
            border-radius: 8px;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .form-group input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
        }

        /* OTP */
        .otp-container {
            display: none;
        }

        .otp-inputs {
            display: flex;
            gap: 0.5rem;
            justify-content: center;
            margin: 1rem 0;
        }

        .otp-input {
            width: 50px;
            height: 50px;
            text-align: center;
            font-size: 1.2rem;
            font-weight: 600;
            border: 2px solid var(--border);
            border-radius: 8px;
            transition: all 0.3s ease;
        }

        .otp-input:focus {
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
        }

        .resend-otp {
            text-align: center;
            margin-top: 1rem;
        }

        .resend-link {
            color: var(--primary);
            text-decoration: none;
            font-weight: 500;
        }

        /* Services Grid */
        .service-grid {
            display: grid;
            gap: 1rem;
            margin-top: 1rem;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        }

        .service-item {
            background: var(--light);
            border-radius: 8px;
            padding: 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 1px solid var(--border);
        }

        .service-item:hover {
            background: var(--primary);
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(37, 99, 235, 0.3);
        }

        .service-item h4 {
            margin: 0 0 0.5rem 0;
            font-size: 1.1rem;
            font-weight: 600;
        }

        .service-item p {
            margin: 0;
            font-size: 0.9rem;
            opacity: 0.8;
        }

        /* Features */
        .features-section {
            padding: 6rem 2rem;
            background: var(--light);
        }

        .section-title {
            text-align: center;
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 1rem;
            color: var(--text-primary);
        }

        .section-subtitle {
            text-align: center;
            font-size: 1.1rem;
            color: var(--text-secondary);
            margin-bottom: 4rem;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }

        .features-grid {
            max-width: 1200px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
        }

        .feature-card {
            background: var(--white);
            border-radius: 12px;
            padding: 2rem;
            border: 1px solid var(--border);
            transition: all 0.3s ease;
        }

        .feature-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        .feature-icon {
            width: 60px;
            height: 60px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            margin-bottom: 1.5rem;
        }

        .feature-title {
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 1rem;
            color: var(--text-primary);
        }

        .feature-description {
            color: var(--text-secondary);
            line-height: 1.6;
        }

        /* Security Features */
        .security-section {
            padding: 6rem 2rem;
            background: var(--light);
        }

        .security-features {
            max-width: 1000px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
        }

        .security-card {
            background: var(--white);
            border-radius: 12px;
            padding: 2rem;
            border: 1px solid var(--border);
            text-align: center;
        }

        .security-icon {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            margin: 0 auto 1.5rem;
            background: var(--light);
            color: var(--primary);
        }

        /* Dashboard Styles */
        .dashboard-container {
            display: none;
            min-height: 100vh;
            background: var(--light);
            padding: 6rem 2rem 2rem;
            transition: all 0.3s ease;
        }

        .dashboard-content {
            max-width: 1200px;
            margin: 0 auto;
        }

        .dashboard-header {
            background: var(--white);
            border-radius: 16px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.05);
            border: 1px solid var(--border);
        }

        .dashboard-welcome {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
        }

        .dashboard-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 2rem;
            margin-bottom: 3rem;
        }

        .dashboard-card {
            background: var(--white);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 2rem;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
            transition: all 0.3s ease;
        }

        .dashboard-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .card-title {
            font-size: 0.9rem;
            color: var(--text-secondary);
            font-weight: 500;
        }

        .card-amount {
            font-size: 2rem;
            font-weight: 700;
            color: var(--text-primary);
        }

        .card-change {
            font-size: 0.9rem;
            margin-top: 0.5rem;
        }

        .positive { color: var(--success); }
        .negative { color: var(--danger); }

        /* Privacy Mode */
        .privacy-blur {
            filter: blur(8px);
            transition: filter 0.3s ease;
            user-select: none;
        }

        /* Transactions */
        .transactions-section {
            background: var(--white);
            border-radius: 16px;
            padding: 2rem;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.05);
            border: 1px solid var(--border);
        }

        .transactions-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 1rem;
        }

        .transactions-table th,
        .transactions-table td {
            padding: 1rem;
            text-align: left;
            border-bottom: 1px solid var(--border-light);
        }

        .transactions-table th {
            background: var(--light);
            font-weight: 600;
            color: var(--text-primary);
        }

        .transaction-type {
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 500;
        }

        .type-credit {
            background: #d1fae5;
            color: var(--success);
        }

        .type-debit {
            background: #fee2e2;
            color: var(--danger);
        }

        .type-transfer {
            background: #dbeafe;
            color: var(--primary);
        }

        /* Account Section */
        .account-section {
            padding: 2rem;
            background: var(--light);
            min-height: 100vh;
        }

        .account-container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .profile-header {
            display: flex;
            align-items: flex-middle;
            gap: 5rem;
            margin-bottom: 3rem;
            background: var(--white);
            border-radius: 32px;
            padding: 5rem;
            border: 2px solid var(--border);
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        }

        .profile-avatar {
            flex-shrink: 0;
        }

        .avatar-circle {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.5rem;
            font-weight: 700;
            box-shadow: 0 4px 20px rgba(59, 130, 246, 0.3);
        }

        .profile-info {
            flex: 1;
        }

        .profile-name {
            font-size: 2rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 1rem;
        }

        .account-status-alert {
            background: #fef3c7;
            border: 1px solid #fbbf24;
            border-radius: 12px;
            padding: 1rem 1.5rem;
            display: flex;
            align-items: center;
            gap: 1rem;
            color: #92400e;
            font-size: 0.9rem;
        }

        .btn-complete {
            background: #f59e0b;
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 8px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .profile-details-section {
            background: var(--white);
            border-radius: 24px;
            padding: 2.5rem;
            border: 1px solid var(--border);
            box-shadow: 0 10px 30px rgba(15, 23, 42, 0.05);
            margin-bottom: 3rem;
        }

        .profile-details-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 2.5rem;
            align-items: flex-start;
        }

        .profile-form-card h3,
        .profile-summary-card h3 {
            margin-bottom: 0.5rem;
            font-size: 1.25rem;
        }

        .profile-form-card p {
            color: var(--text-secondary);
            margin-bottom: 1.5rem;
        }

        .profile-form {
            display: grid;
            gap: 1rem;
        }

        .profile-form .form-row {
            display: grid;
            gap: 0.5rem;
        }

        .profile-form label {
            font-weight: 500;
            color: var(--text-primary);
        }

        .profile-form input,
        .profile-form select {
            padding: 0.75rem;
            border: 1px solid var(--border);
            border-radius: 8px;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .profile-form input:focus,
        .profile-form select:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
        }

        .profile-form textarea {
            padding: 0.75rem;
            border: 1px solid var(--border);
            border-radius: 8px;
            font-size: 1rem;
            font-family: inherit;
            min-height: 100px;
            resize: vertical;
            transition: all 0.3s ease;
        }

        .profile-form textarea:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
        }

        .profile-form button {
            justify-self: flex-start;
        }

        .form-hint {
            font-size: 0.85rem;
            color: var(--text-secondary);
        }

        .profile-summary-card {
            background: var(--light);
            border-radius: 20px;
            padding: 2rem;
            border: 1px solid var(--border);
        }

        .profile-summary-card p {
            color: var(--text-secondary);
        }

        .profile-details-display {
            border: 1px dashed var(--border);
            border-radius: 16px;
            padding: 1.5rem;
            display: grid;
            gap: 1rem;
        }

        .profile-details-display.empty {
            text-align: center;
            font-size: 0.95rem;
            color: var(--text-secondary);
        }

        .profile-detail-item {
            display: flex;
            justify-content: space-between;
            gap: 1rem;
            padding-bottom: 0.75rem;
            border-bottom: 1px solid var(--border-light);
        }

        .profile-detail-item:last-child {
            border-bottom: none;
            padding-bottom: 0;
        }

        .profile-detail-label {
            font-weight: 600;
            color: var(--text-secondary);
        }

        .profile-detail-value {
            font-weight: 600;
            color: var(--text-primary);
            text-align: right;
        }

        .profile-clear-btn {
            margin-top: 1rem;
            width: 100%;
            justify-content: center;
        }

        .profile-details-section.section-highlight {
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.2), 0 25px 60px rgba(15, 23, 42, 0.2);
            transition: box-shadow 0.4s ease;
        }

        .management-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 2rem;
            margin-top: 1.5rem;
        }

        .management-form-card,
        .management-records-card {
            background: var(--white);
            border-radius: 20px;
            padding: 1.75rem;
            border: 1px solid var(--border);
            box-shadow: 0 10px 30px rgba(15, 23, 42, 0.05);
        }

        .management-field {
            display: flex;
            flex-direction: column;
            gap: 0.35rem;
            margin-bottom: 1rem;
        }

        .management-field label {
            font-size: 0.95rem;
            font-weight: 600;
            color: var(--text-primary);
        }

        .management-field input,
        .management-field select,
        .management-field textarea {
            padding: 0.75rem;
            border: 1px solid var(--border);
            border-radius: 10px;
            font-size: 1rem;
            transition: all 0.3s ease;
            font-family: inherit;
        }

        .management-field input:focus,
        .management-field select:focus,
        .management-field textarea:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.15);
        }

        .management-field textarea {
            min-height: 90px;
            resize: vertical;
        }

        .record-list {
            display: grid;
            gap: 1rem;
            margin-top: 1rem;
        }

        .record-card {
            border: 1px solid var(--border);
            border-radius: 14px;
            padding: 1rem;
            background: var(--light);
        }

        .record-row {
            display: flex;
            justify-content: space-between;
            gap: 1rem;
            padding: 0.35rem 0;
            border-bottom: 1px solid var(--border-light);
            font-size: 0.95rem;
        }

        .record-row:last-child {
            border-bottom: none;
        }

        .record-row span {
            color: var(--text-secondary);
        }

        .record-row strong {
            color: var(--text-primary);
            font-weight: 600;
        }

        .record-actions {
            display: flex;
            gap: 0.5rem;
            margin-top: 0.75rem;
        }

        .record-actions button {
            flex: 1;
            border: none;
            border-radius: 8px;
            padding: 0.5rem;
            cursor: pointer;
            font-weight: 600;
            background: white;
            border: 1px solid var(--border);
            transition: all 0.2s ease;
        }

        .record-actions button:hover {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        .record-actions .danger {
            background: #fee2e2;
            border-color: #fecaca;
            color: var(--danger);
        }

        .record-actions .danger:hover {
            background: var(--danger);
            color: white;
            border-color: var(--danger);
        }

        .management-empty-state {
            text-align: center;
            padding: 1.5rem;
            border: 1px dashed var(--border);
            border-radius: 12px;
            color: var(--text-secondary);
        }

        /* Settings Toggle Section */
        .settings-toggle-section {
            background: var(--white);
            border-radius: 16px;
            padding: 2rem;
            border: 1px solid var(--border);
            margin-bottom: 2rem;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        }

        .toggle-setting-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1.5rem 0;
            border-bottom: 1px solid var(--border-light);
        }

        .toggle-setting-item:last-child {
            border-bottom: none;
        }

        .toggle-setting-info h3 {
            font-size: 1rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 0.25rem;
        }

        .toggle-setting-info p {
            font-size: 0.85rem;
            color: var(--text-secondary);
            margin: 0;
        }

        /* iOS Toggle Switch */
        .ios-toggle {
            width: 60px;
            height: 34px;
            background-color: #e5e7eb;
            border-radius: 17px;
            position: relative;
            cursor: pointer;
            transition: background-color 0.3s ease;
            border: none;
            outline: none;
        }

        .ios-toggle.active {
            background-color: var(--primary);
        }

        .ios-toggle-slider {
            width: 30px;
            height: 30px;
            background-color: white;
            border-radius: 15px;
            position: absolute;
            top: 2px;
            left: 2px;
            transition: transform 0.3s ease;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.15);
        }

        .ios-toggle.active .ios-toggle-slider {
            transform: translateX(26px);
        }

        /* Family Section */
        .family-section {
            background: var(--white);
            border-radius: 16px;
            padding: 2rem;
            border: 1px solid var(--border);
            margin-bottom: 2rem;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
        }

        .family-toggle-button {
            background: var(--primary);
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-bottom: 2rem;
        }

        .family-view {
            display: none;
        }

        .family-members-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-top: 1.5rem;
        }

        .family-member-card {
            background: var(--light);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 1.5rem;
            text-align: center;
            transition: all 0.3s ease;
        }

        .family-member-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 700;
            margin: 0 auto 1rem;
        }

        .family-member-name {
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 0.25rem;
        }

        .family-member-role {
            font-size: 0.8rem;
            color: var(--text-secondary);
            margin-bottom: 1rem;
        }

        .family-member-wealth {
            font-size: 1.1rem;
            font-weight: 700;
            color: var(--success);
        }

        /* Account Management Grid */
        .account-management-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-bottom: 3rem;
        }

        .account-card {
            background: var(--white);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 1.5rem;
            display: flex;
            align-items: center;
            gap: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .account-card:hover {
            border-color: var(--primary);
            box-shadow: 0 4px 20px rgba(59, 130, 246, 0.1);
            transform: translateY(-2px);
        }

        .card-icon {
            width: 48px;
            height: 48px;
            border-radius: 10px;
            background: rgba(59, 130, 246, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.25rem;
            flex-shrink: 0;
        }

        .card-content h3 {
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 0.25rem;
        }

        .card-content p {
            font-size: 0.9rem;
            color: var(--text-secondary);
            margin: 0;
        }

        /* Quick Actions */
        .quick-actions {
            background: var(--white);
            border-radius: 12px;
            padding: 2rem;
            border: 1px solid var(--border);
        }

        .quick-actions h3 {
            font-size: 1.3rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 1.5rem;
        }

        .quick-actions-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 1rem;
        }

        .quick-action-btn {
            background: var(--light);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 1rem;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
            color: var(--text-primary);
            font-size: 0.9rem;
            font-weight: 500;
        }

        .quick-action-btn:hover {
            background: var(--primary);
            border-color: var(--primary);
            color: white;
            transform: translateY(-2px);
        }

        .quick-action-btn.danger:hover {
            background: var(--danger);
            border-color: var(--danger);
        }

        /* Success Notification */
        .success-notification {
            position: fixed;
            top: 2rem;
            right: 2rem;
            background: var(--success);
            color: white;
            padding: 1rem 1.5rem;
            border-radius: 8px;
            display: flex;
            align-items: center;
            gap: 0.75rem;
            font-weight: 500;
            z-index: 9999;
            animation: slideInRight 0.3s ease-out;
            box-shadow: 0 4px 20px rgba(16, 185, 129, 0.3);
        }

        /* Insight Arrow Buttons */
        .insight-arrow-btn {
            background: rgba(59, 130, 246, 0.1);
            border: 1px solid rgba(59, 130, 246, 0.2);
            border-radius: 50%;
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            color: var(--primary);
            font-size: 0.9rem;
        }

        .insight-arrow-btn:hover {
            background: var(--primary);
            color: white;
            transform: translateX(2px);
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
        }

        /* Member Insight Buttons */
        .member-insight-btn {
            background: var(--light);
            border: 1px solid var(--border);
            border-radius: 6px;
            padding: 0.5rem 1rem;
            font-size: 0.8rem;
            cursor: pointer;
            transition: all 0.3s ease;
            color: var(--text-primary);
            margin-top: 1rem;
            width: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }

        .member-insight-btn:hover {
            background: var(--primary);
            border-color: var(--primary);
            color: white;
            transform: translateY(-1px);
        }

        /* Calendar Modal Styles */
        .calendar-modal {
            display: none;
            position: fixed;
            z-index: 2500;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(8px);
        }

        .calendar-modal-content {
            background-color: var(--white);
            margin: 2% auto;
            padding: 0;
            border-radius: 20px;
            width: 95%;
            max-width: 1000px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.3);
            border: 1px solid var(--border);
        }

        .calendar-modal-header {
            background: linear-gradient(135deg, #059669, #047857);
            color: white;
            padding: 2rem;
            text-align: center;
            position: relative;
            border-radius: 20px 20px 0 0;
        }

        .calendar-modal-body {
            padding: 2rem;
        }

        .calendar-container {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 2rem;
        }

        .calendar-grid {
            background: var(--white);
            border-radius: 12px;
            border: 1px solid var(--border);
            overflow: hidden;
        }

        .calendar-header {
            background: var(--light);
            padding: 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-weight: 600;
        }

        .calendar-nav-btn {
            background: none;
            border: none;
            font-size: 1.2rem;
            cursor: pointer;
            padding: 0.5rem;
            border-radius: 4px;
            color: var(--primary);
            transition: background 0.3s ease;
        }

        .calendar-nav-btn:hover {
            background: var(--border);
        }

        .calendar-days {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
        }

        .calendar-day-header {
            background: var(--border-light);
            padding: 0.75rem;
            text-align: center;
            font-weight: 600;
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        .calendar-day {
            min-height: 80px;
            border: 1px solid var(--border-light);
            padding: 0.5rem;
            cursor: pointer;
            transition: background 0.3s ease;
            position: relative;
        }

        .calendar-day:hover {
            background: var(--light);
        }

        .calendar-day.selected {
            background: rgba(37, 99, 235, 0.1);
            border-color: var(--primary);
        }

        .calendar-day.today {
            background: rgba(16, 185, 129, 0.1);
            border-color: var(--success);
        }

        .calendar-day.other-month {
            color: var(--text-secondary);
            opacity: 0.5;
        }

        .calendar-day-number {
            font-weight: 600;
            margin-bottom: 0.25rem;
        }

        .event-dot {
            width: 6px;
            height: 6px;
            border-radius: 50%;
            display: inline-block;
            margin-right: 3px;
            margin-bottom: 2px;
        }

        .event-dot.emi { background: #dc2626; }
        .event-dot.sip { background: #059669; }
        .event-dot.insurance { background: #2563eb; }
        .event-dot.bill { background: #f59e0b; }

        .calendar-events-panel {
            background: var(--light);
            border-radius: 12px;
            padding: 1.5rem;
            border: 1px solid var(--border);
        }

        .selected-date-header {
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 1rem;
            padding-bottom: 0.75rem;
            border-bottom: 1px solid var(--border);
        }

        .event-list {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .event-item {
            background: var(--white);
            border-radius: 8px;
            padding: 1rem;
            border: 1px solid var(--border);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .event-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .event-title {
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 0.25rem;
        }

        .event-details {
            font-size: 0.9rem;
            color: var(--text-secondary);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .event-amount {
            font-weight: 600;
        }

        @media (max-width: 768px) {
            .calendar-container {
                grid-template-columns: 1fr;
            }
            
            .calendar-modal-content {
                width: 98%;
                margin: 1% auto;
            }
        }

        /* Insight Modal Styles */
        .insight-modal {
            display: none;
            position: fixed;
            z-index: 2500;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(8px);
        }

        .insight-modal-content {
            background-color: var(--white);
            margin: 3% auto;
            padding: 0;
            border-radius: 20px;
            width: 90%;
            max-width: 900px;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.3);
            border: 1px solid var(--border);
        }

        .insight-modal-header {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            padding: 2rem;
            text-align: center;
            position: relative;
            border-radius: 20px 20px 0 0;
        }

        .insight-modal-body {
            padding: 2rem;
        }

        .insights-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .insight-card {
            background: var(--light);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 1.5rem;
            transition: all 0.3s ease;
        }

        .insight-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
        }

        .insight-card h4 {
            color: var(--text-primary);
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .insight-value {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 0.5rem;
        }

        .insight-description {
            color: var(--text-secondary);
            font-size: 0.9rem;
            line-height: 1.4;
        }

        .progress-bar-container {
            background: #e5e7eb;
            border-radius: 8px;
            height: 8px;
            overflow: hidden;
            margin: 1rem 0;
        }

        .progress-bar-fill {
            height: 100%;
            border-radius: 8px;
            transition: width 0.5s ease;
        }

        /* Footer */
        .footer {
            background: var(--dark);
            color: white;
            padding: 3rem 2rem 2rem;
        }

        .footer-content {
            max-width: 1200px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
        }

        .footer-section h3 {
            margin-bottom: 1rem;
            color: white;
        }

        .footer-links {
            list-style: none;
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .footer-links a {
            color: #9ca3af;
            text-decoration: none;
            transition: color 0.3s ease;
        }

        .footer-links a:hover {
            color: white;
        }

        .footer-bottom {
            margin-top: 2rem;
            padding-top: 2rem;
            border-top: 1px solid #374151;
            text-align: center;
            color: #9ca3af;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .mobile-toggle {
                display: block;
            }

            .nav-menu {
                display: none;
                position: fixed;
                top: 100%;
                left: 0;
                width: 100%;
                background: white;
                flex-direction: column;
                padding: 2rem;
                box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            }

            .nav-menu.active {
                display: flex;
            }

            .profile-header {
                flex-direction: column;
                gap: 1.5rem;
            }

            .dashboard-welcome {
                flex-direction: column;
                gap: 1rem;
            }

            .cta-buttons {
                flex-direction: column;
                align-items: center;
            }

            .account-status-alert {
                flex-direction: column;
                align-items: flex-start;
                gap: 1rem;
            }
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="logo-container">
                <a href="#" class="logo">Fintpe</a>
                <span class="coming-soon-badge">Coming Soon</span>
            </div>
            <ul class="nav-menu" id="nav-menu">
                <li><button onclick="openProductsModal()" class="nav-link">Products</button></li>
                <li><button class="login-btn" onclick="openLoginModal()" id="loginBtn">Login</button></li>
            </ul>
            <button class="mobile-toggle" id="mobile-toggle">
                <i class="fas fa-bars"></i>
            </button>
        </div>
    </nav>

    <!-- Service Modal -->
    <div id="serviceModal" class="service-modal">
        <div class="service-modal-content">
            <div class="service-modal-header">
                <span class="close" onclick="closeServiceModal()">&times;</span>
                <h2 id="serviceModalTitle">Service</h2>
                <p id="serviceModalSubtitle">Choose an option below</p>
            </div>
            <div class="service-modal-body" id="serviceModalBody">
                <!-- Dynamic content will be loaded here -->
            </div>
        </div>
    </div>

    <!-- Login Modal -->
    <div id="loginModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <span class="close" onclick="closeLoginModal()">&times;</span>
                <h2 id="modalTitle">Login to Fintpe</h2>
                <p id="modalSubtitle">Access your financial dashboard</p>
            </div>
            <div class="modal-body">
                <!-- Email Login Form -->
                <form class="login-form" id="emailForm">
                    <div class="form-group">
                        <label>Email Address</label>
                        <input type="email" id="email" placeholder="Enter your email address" required>
                    </div>
                    <button type="submit" class="btn btn-primary" style="width: 100%; justify-content: center;">
                        <i class="fas fa-paper-plane"></i>
                        Send OTP
                    </button>
                </form>

                <!-- OTP Verification Form -->
                <div class="otp-container" id="otpContainer">
                    <p style="text-align: center; color: var(--text-secondary); margin-bottom: 1rem;">
                        We've sent a 6-digit OTP to <span id="emailDisplay" style="color: var(--primary); font-weight: 600;"></span>
                    </p>
                    <div class="otp-inputs">
                        <input type="text" class="otp-input" maxlength="1" pattern="[0-9]">
                        <input type="text" class="otp-input" maxlength="1" pattern="[0-9]">
                        <input type="text" class="otp-input" maxlength="1" pattern="[0-9]">
                        <input type="text" class="otp-input" maxlength="1" pattern="[0-9]">
                        <input type="text" class="otp-input" maxlength="1" pattern="[0-9]">
                        <input type="text" class="otp-input" maxlength="1" pattern="[0-9]">
                    </div>
                    <button type="button" class="btn btn-primary" style="width: 100%; justify-content: center;" onclick="verifyOTP()">
                        <i class="fas fa-check"></i>
                        Verify & Login
                    </button>
                    <div class="resend-otp">
                        <a href="#" class="resend-link" onclick="resendOTP()">Didn't receive OTP? Resend</a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Content Container -->
    <div id="main-content">
        <!-- Dynamic content will be loaded here -->
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-content">
            <div class="footer-section">
                <h3>Fintpe</h3>
                <p style="color: #9ca3af; margin-bottom: 1rem;">Complete financial management platform for modern India.</p>
                <div style="display: flex; gap: 1rem;">
                    <a href="#" style="color: #9ca3af; font-size: 1.2rem;"><i class="fab fa-twitter"></i></a>
                    <a href="#" style="color: #9ca3af; font-size: 1.2rem;"><i class="fab fa-facebook"></i></a>
                    <a href="#" style="color: #9ca3af; font-size: 1.2rem;"><i class="fab fa-linkedin"></i></a>
                    <a href="#" style="color: #9ca3af; font-size: 1.2rem;"><i class="fab fa-instagram"></i></a>
                </div>
            </div>
            
            <div class="footer-section">
                <h3>Products</h3>
                <ul class="footer-links">
                    <li><a href="#">UPI Payments</a></li>
                    <li><a href="#">Account Tracking</a></li>
                    <li><a href="#">Investment Tools</a></li>
                    <li><a href="#">Bill Management</a></li>
                </ul>
            </div>
            
            <div class="footer-section">
                <h3>Resources</h3>
                <ul class="footer-links">
                    <li><a href="#">Help Center</a></li>
                    <li><a href="#">Security</a></li>
                    <li><a href="#">API Documentation</a></li>
                    <li><a href="#">Developer Portal</a></li>
                </ul>
            </div>
            
            <div class="footer-section">
                <h3>Company</h3>
                <ul class="footer-links">
                    <li><a href="#">About Us</a></li>
                    <li><a href="#">Careers</a></li>
                    <li><a href="#">Press</a></li>
                    <li><a href="#">Contact</a></li>
                </ul>
            </div>
        </div>
        
        <div class="footer-bottom">
            <div style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap; gap: 1rem;">
                <p>&copy; 2025 Fintpe. All rights reserved. | Privacy Policy | Terms of Service | Regulated by RBI</p>
                <div style="display: flex; align-items: center; gap: 0.5rem;">
                    <span style="color: #9ca3af;"></span>
                    <span style="color: #9ca3af; font-weight: 600;">Made in India for World</span>
                </div>
            </div>
        </div>
    </footer>

    <!-- JavaScript -->
    <script>
        // Fixed auth.js content
        let isLoggedIn = false;
        let userEmail = '';
        let otpSent = false;

        // Login Modal Functions
        function openLoginModal() {
            const modal = document.getElementById('loginModal');
            if (modal) {
                modal.style.display = 'block';
                resetLoginForm();
            }
        }

        function closeLoginModal() {
            const modal = document.getElementById('loginModal');
            if (modal) {
                modal.style.display = 'none';
                resetLoginForm();
            }
        }

        function resetLoginForm() {
            const emailForm = document.getElementById('emailForm');
            const otpContainer = document.getElementById('otpContainer');
            const modalTitle = document.getElementById('modalTitle');
            const modalSubtitle = document.getElementById('modalSubtitle');
            const emailInput = document.getElementById('email');
            
            if (emailForm) emailForm.style.display = 'block';
            if (otpContainer) otpContainer.style.display = 'none';
            if (modalTitle) modalTitle.textContent = 'Login to Fintpe';
            if (modalSubtitle) modalSubtitle.textContent = 'Access your financial dashboard';
            if (emailInput) emailInput.value = '';
            
            const otpInputs = document.querySelectorAll('.otp-input');
            otpInputs.forEach(input => input.value = '');
            
            otpSent = false;
        }

        // Verify OTP
        function verifyOTP() {
            const otpInputs = document.querySelectorAll('.otp-input');
            let otp = '';
            otpInputs.forEach(input => otp += input.value);

            if (otp.length !== 6) {
                alert('Please enter complete 6-digit OTP');
                return;
            }

            const verifyButton = document.querySelector('button[onclick="verifyOTP()"]');
            if (!verifyButton) return;
            
            const originalText = verifyButton.innerHTML;
            
            verifyButton.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Verifying...';
            verifyButton.disabled = true;

            setTimeout(() => {
                verifyButton.innerHTML = '<i class="fas fa-check"></i> Login Successful!';
                verifyButton.style.background = 'var(--success)';
                
                setTimeout(() => {
                    isLoggedIn = true;
                    saveSession();
                    closeLoginModal();
                    loadDashboard();
                    updateNavigationForLogin();
                }, 1500);
            }, 2000);
        }

        // Update navigation after login
        function updateNavigationForLogin() {
            const loginBtn = document.getElementById('loginBtn');
            if (loginBtn) {
                loginBtn.innerHTML = '<i class="fas fa-user"></i> Dashboard';
                loginBtn.onclick = () => loadDashboard();
            }
        }

        // Load Dashboard with Family View Support
        function loadDashboard() {
            if (!isLoggedIn || !userEmail) {
                openLoginModal();
                return;
            }

            const financialData = getFinancialData();
            const mainContent = document.getElementById('main-content');
            
            if (mainContent) {
                mainContent.innerHTML = `
                    <div class="dashboard-container" style="display: block;">
                        <div class="dashboard-content">
                            <!-- Dashboard Header with Family Toggle -->
                            <div class="dashboard-header">
                                <div class="dashboard-welcome">
                                    <div>
                                        <h2 style="margin-bottom: 0.5rem;">Welcome to Fintpe! </h2>
                                        <p style="color: var(--text-secondary); margin: 0;">${userEmail}</p>
                                    </div>
                                    <div style="display: flex; gap: 1rem; align-items: center;">
                                        <button onclick="toggleDashboardFamilyView()" class="btn btn-secondary" id="dashboardFamilyToggle">
                                            <i class="fas fa-users"></i>
                                            Family View
                                        </button>
                                        <button onclick="loadPage('account')" class="btn btn-secondary">
                                            <i class="fas fa-user-cog"></i>
                                            My Account
                                        </button>
                                        <button onclick="logout()" class="btn btn-secondary">
                                            <i class="fas fa-sign-out-alt"></i>
                                            Logout
                                        </button>
                                    </div>
                                </div>
                                
                                <!-- Individual Dashboard View (Default) -->
                                <div id="dashboardIndividualView">
                                    <!-- Individual Net Worth Card (Top Priority) -->
                                    <div class="dashboard-card" style="background: linear-gradient(135deg, var(--success), #059669); color: white; margin-bottom: 3rem; border: none;">
                                        <div class="card-header" style="border-bottom: 1px solid rgba(255,255,255,0.2); padding-bottom: 1rem; margin-bottom: 1.5rem;">
                                            <span class="card-title" style="color: rgba(255,255,255,0.9); font-size: 1.1rem;">YOUR NET WORTH</span>
                                            <div style="display: flex; align-items: center; gap: 1rem;">
                                                <i class="fas fa-user-crown" style="color: #fbbf24; font-size: 1.5rem;"></i>
                                                <button onclick="openIndividualNetWorthInsights()" class="insight-arrow-btn" style="background: rgba(255,255,255,0.2); border-color: rgba(255,255,255,0.3); color: white;" title="View your net worth breakdown">
                                                    <i class="fas fa-arrow-right"></i>
                                                </button>
                                            </div>
                                        </div>
                                        <div class="card-amount" style="font-size: 2.5rem; color: white; text-shadow: 2px 2px 4px rgba(0,0,0,0.3);" data-private="1,25,85,920" data-placeholder="">1,25,85,920</div>
                                        <div class="card-change positive" style="color: #10f981; font-size: 1rem; margin-top: 1rem;">
                                            <i class="fas fa-trending-up"></i>
                                            +2,15,450 this quarter (+1.8%)
                                        </div>
                                        <div style="margin-top: 1.5rem; font-size: 0.85rem; color: rgba(255,255,255,0.8);">
                                            Assets: 1,42,50,920 | Liabilities: 16,65,000 | Your contribution: 51% of family wealth
                                        </div>
                                    </div>

                                    <div class="dashboard-cards" style="grid-template-columns: repeat(3, 1fr);">
                                        <div class="dashboard-card">
                                            <div class="card-header">
                                                <span class="card-title">LIQUID BALANCE</span>
                                                <div style="display: flex; align-items: center; gap: 1rem;">
                                                    <i class="fas fa-wallet" style="color: var(--primary);"></i>
                                                    <button onclick="openIndividualBalanceInsights()" class="insight-arrow-btn" title="View balance details">
                                                        <i class="fas fa-arrow-right"></i>
                                                    </button>
                                                </div>
                                            </div>
                                            <div class="card-amount" data-private="9,85,920" data-placeholder="">9,85,920</div>
                                            <div class="card-change positive">
                                                <i class="fas fa-arrow-up"></i>
                                                +18,450 this month
                                            </div>
                                        </div>

                                        <div class="dashboard-card">
                                            <div class="card-header">
                                                <span class="card-title">INVESTMENTS</span>
                                                <div style="display: flex; align-items: center; gap: 1rem;">
                                                    <i class="fas fa-chart-line" style="color: var(--success);"></i>
                                                    <button onclick="openIndividualInvestmentInsights()" class="insight-arrow-btn" title="View portfolio analysis">
                                                        <i class="fas fa-arrow-right"></i>
                                                    </button>
                                                </div>
                                            </div>
                                            <div class="card-amount" data-private="65,85,000" data-placeholder="">65,85,000</div>
                                            <div class="card-change positive">
                                                <i class="fas fa-arrow-up"></i>
                                                +14.2% returns (YTD)
                                            </div>
                                        </div>

                                        <div class="dashboard-card">
                                            <div class="card-header">
                                                <span class="card-title">REAL ESTATE</span>
                                                <div style="display: flex; align-items: center; gap: 1rem;">
                                                    <i class="fas fa-home" style="color: #f59e0b;"></i>
                                                    <button onclick="openIndividualRealEstateInsights()" class="insight-arrow-btn" title="View property details">
                                                        <i class="fas fa-arrow-right"></i>
                                                    </button>
                                                </div>
                                            </div>
                                            <div class="card-amount" data-private="45,50,000" data-placeholder="">45,50,000</div>
                                            <div class="card-change positive">
                                                <i class="fas fa-arrow-up"></i>
                                                +7.2% appreciation
                                            </div>
                                        </div>

                                        <div class="dashboard-card">
                                            <div class="card-header">
                                                <span class="card-title">GOLD HOLDINGS</span>
                                                <div style="display: flex; align-items: center; gap: 1rem;">
                                                    <i class="fas fa-coins" style="color: #fbbf24;"></i>
                                                    <button onclick="openIndividualGoldInsights()" class="insight-arrow-btn" title="View gold portfolio">
                                                        <i class="fas fa-arrow-right"></i>
                                                    </button>
                                                </div>
                                            </div>
                                            <div class="card-amount" data-private="6,85,000" data-placeholder="">6,85,000</div>
                                            <div class="card-change positive">
                                                <i class="fas fa-arrow-up"></i>
                                                +11.5% vs purchase
                                            </div>
                                        </div>

                                        <div class="dashboard-card">
                                            <div class="card-header">
                                                <span class="card-title">YOUR SPENDING</span>
                                                <div style="display: flex; align-items: center; gap: 1rem;">
                                                    <i class="fas fa-credit-card" style="color: var(--danger);"></i>
                                                    <button onclick="openIndividualSpendingInsights()" class="insight-arrow-btn" title="View spending breakdown">
                                                        <i class="fas fa-arrow-right"></i>
                                                    </button>
                                                </div>
                                            </div>
                                            <div class="card-amount" data-private="35,450" data-placeholder="">35,450</div>
                                            <div class="card-change negative">
                                                <i class="fas fa-arrow-down"></i>
                                                -2,100 vs last month
                                            </div>
                                        </div>

                                        <div class="dashboard-card">
                                            <div class="card-header">
                                                <span class="card-title">LOANS & EMIs</span>
                                                <div style="display: flex; align-items: center; gap: 1rem;">
                                                    <i class="fas fa-hand-holding-usd" style="color: #dc2626;"></i>
                                                    <button onclick="openIndividualLoansInsights()" class="insight-arrow-btn" title="View loan details">
                                                        <i class="fas fa-arrow-right"></i>
                                                    </button>
                                                </div>
                                            </div>
                                            <div class="card-amount" data-private="16,65,000" data-placeholder="">16,65,000</div>
                                            <div class="card-change negative">
                                                <i class="fas fa-calendar-minus"></i>
                                                28,450 monthly EMI
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Family Dashboard View (Hidden by default) -->
                                <div id="dashboardFamilyView" style="display: none;">
                                    <h3 style="color: var(--text-primary); margin-bottom: 2rem;">Family Financial Overview</h3>
                                    
                                    <!-- Family Net Worth Card (Top Priority) -->
                                    <div class="dashboard-card" style="background: linear-gradient(135deg, var(--primary), var(--primary-dark)); color: white; margin-bottom: 3rem; border: none;">
                                        <div class="card-header" style="border-bottom: 1px solid rgba(255,255,255,0.2); padding-bottom: 1rem; margin-bottom: 1.5rem;">
                                            <span class="card-title" style="color: rgba(255,255,255,0.9); font-size: 1.1rem;">FAMILY NET WORTH</span>
                                            <div style="display: flex; align-items: center; gap: 1rem;">
                                                <i class="fas fa-crown" style="color: #fbbf24; font-size: 1.5rem;"></i>
                                                <button onclick="openNetWorthInsights()" class="insight-arrow-btn" style="background: rgba(255,255,255,0.2); border-color: rgba(255,255,255,0.3); color: white;" title="View net worth breakdown">
                                                    <i class="fas fa-arrow-right"></i>
                                                </button>
                                            </div>
                                        </div>
                                        <div class="card-amount" style="font-size: 3rem; color: white; text-shadow: 2px 2px 4px rgba(0,0,0,0.3);" data-private="2,45,67,890" data-placeholder="">2,45,67,890</div>
                                        <div class="card-change positive" style="color: #10f981; font-size: 1.1rem; margin-top: 1rem;">
                                            <i class="fas fa-trending-up"></i>
                                            +4,85,320 this quarter (+2.01%)
                                        </div>
                                        <div style="margin-top: 1.5rem; font-size: 0.9rem; color: rgba(255,255,255,0.8);">
                                            Assets: 2,67,89,450 | Liabilities: 22,21,560 | Growth: +18.5% YoY
                                        </div>
                                    </div>

                                    <!-- Enhanced Family Financial Cards with Insights (7 cards in grid) -->
                                    <div class="dashboard-cards" style="grid-template-columns: repeat(3, 1fr);">
                                        <div class="dashboard-card">
                                            <div class="card-header">
                                                <span class="card-title">LIQUID ASSETS</span>
                                                <div style="display: flex; align-items: center; gap: 1rem;">
                                                    <i class="fas fa-tint" style="color: var(--primary);"></i>
                                                    <button onclick="openFamilyBalanceInsights()" class="insight-arrow-btn" title="View detailed insights">
                                                        <i class="fas fa-arrow-right"></i>
                                                    </button>
                                                </div>
                                            </div>
                                            <div class="card-amount" data-private="18,45,890" data-placeholder="">18,45,890</div>
                                            <div class="card-change positive">
                                                <i class="fas fa-arrow-up"></i>
                                                +32,450 this month
                                            </div>
                                        </div>

                                        <div class="dashboard-card">
                                            <div class="card-header">
                                                <span class="card-title">INVESTMENTS</span>
                                                <div style="display: flex; align-items: center; gap: 1rem;">
                                                    <i class="fas fa-chart-line" style="color: var(--success);"></i>
                                                    <button onclick="openFamilyInvestmentInsights()" class="insight-arrow-btn" title="View investment analysis">
                                                        <i class="fas fa-arrow-right"></i>
                                                    </button>
                                                </div>
                                            </div>
                                            <div class="card-amount" data-private="1,28,54,200" data-placeholder="">1,28,54,200</div>
                                            <div class="card-change positive">
                                                <i class="fas fa-arrow-up"></i>
                                                +15.2% returns (YTD)
                                            </div>
                                        </div>

                                        <div class="dashboard-card">
                                            <div class="card-header">
                                                <span class="card-title">REAL ESTATE</span>
                                                <div style="display: flex; align-items: center; gap: 1rem;">
                                                    <i class="fas fa-home" style="color: #f59e0b;"></i>
                                                    <button onclick="openRealEstateInsights()" class="insight-arrow-btn" title="View property insights">
                                                        <i class="fas fa-arrow-right"></i>
                                                    </button>
                                                </div>
                                            </div>
                                            <div class="card-amount" data-private="85,50,000" data-placeholder="">85,50,000</div>
                                            <div class="card-change positive">
                                                <i class="fas fa-arrow-up"></i>
                                                +8.5% appreciation
                                            </div>
                                        </div>

                                        <div class="dashboard-card">
                                            <div class="card-header">
                                                <span class="card-title">GOLD HOLDINGS</span>
                                                <div style="display: flex; align-items: center; gap: 1rem;">
                                                    <i class="fas fa-coins" style="color: #fbbf24;"></i>
                                                    <button onclick="openGoldInsights()" class="insight-arrow-btn" title="View gold portfolio">
                                                        <i class="fas fa-arrow-right"></i>
                                                    </button>
                                                </div>
                                            </div>
                                            <div class="card-amount" data-private="12,45,600" data-placeholder="">12,45,600</div>
                                            <div class="card-change positive">
                                                <i class="fas fa-arrow-up"></i>
                                                +12.8% vs purchase
                                            </div>
                                        </div>

                                        <div class="dashboard-card">
                                            <div class="card-header">
                                                <span class="card-title">FAMILY LOANS</span>
                                                <div style="display: flex; align-items: center; gap: 1rem;">
                                                    <i class="fas fa-hand-holding-usd" style="color: #dc2626;"></i>
                                                    <button onclick="openFamilyLoansInsights()" class="insight-arrow-btn" title="View all family loans">
                                                        <i class="fas fa-arrow-right"></i>
                                                    </button>
                                                </div>
                                            </div>
                                            <div class="card-amount" data-private="22,21,560" data-placeholder="">22,21,560</div>
                                            <div class="card-change negative">
                                                <i class="fas fa-calendar-minus"></i>
                                                42,850 monthly EMI
                                            </div>
                                        </div>

                                        <div class="dashboard-card">
                                            <div class="card-header">
                                                <span class="card-title">MONTHLY SPENDING</span>
                                                <div style="display: flex; align-items: center; gap: 1rem;">
                                                    <i class="fas fa-credit-card" style="color: var(--danger);"></i>
                                                    <button onclick="openFamilySpendingInsights()" class="insight-arrow-btn" title="View spending breakdown">
                                                        <i class="fas fa-arrow-right"></i>
                                                    </button>
                                                </div>
                                            </div>
                                            <div class="card-amount" data-private="78,650" data-placeholder="">78,650</div>
                                            <div class="card-change negative">
                                                <i class="fas fa-arrow-down"></i>
                                                -5,200 vs last month
                                            </div>
                                        </div>

                                        <div class="dashboard-card">
                                            <div class="card-header">
                                                <span class="card-title">FINANCIAL GOALS</span>
                                                <div style="display: flex; align-items: center; gap: 1rem;">
                                                    <i class="fas fa-bullseye" style="color: var(--warning);"></i>
                                                    <button onclick="openFamilyGoalsInsights()" class="insight-arrow-btn" title="View goals progress">
                                                        <i class="fas fa-arrow-right"></i>
                                                    </button>
                                                </div>
                                            </div>
                                            <div class="card-amount" data-private="2,50,00,000" data-placeholder="">2,50,00,000</div>
                                            <div class="card-change positive">
                                                <i class="fas fa-chart-pie"></i>
                                                72% progress overall
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <h4 style="color: var(--text-primary); margin-bottom: 1.5rem; margin-top: 3rem;">Family Members Portfolio</h4>
                                    <div class="family-members-grid" id="dashboardFamilyMembersContainer">
                                        <div class="family-member-card">
                                            <div class="family-member-avatar">JD</div>
                                            <div class="family-member-name">John Doe</div>
                                            <div class="family-member-role">You (Primary)</div>
                                            <div class="family-member-wealth" data-private="1,25,85,920" data-placeholder="">1,25,85,920</div>
                                            <div style="font-size: 0.8rem; color: var(--success); margin-top: 0.5rem;">+12.5% growth | 51% of family wealth</div>
                                            <button onclick="openMemberInsights('john')" class="member-insight-btn">
                                                <i class="fas fa-chart-bar"></i> View Details
                                            </button>
                                        </div>

                                        <div class="family-member-card">
                                            <div class="family-member-avatar">JD</div>
                                            <div class="family-member-name">Jane Doe</div>
                                            <div class="family-member-role">Spouse</div>
                                            <div class="family-member-wealth" data-private="85,25,470" data-placeholder="">85,25,470</div>
                                            <div style="font-size: 0.8rem; color: var(--success); margin-top: 0.5rem;">+18.2% growth | 35% of family wealth</div>
                                            <button onclick="openMemberInsights('jane')" class="member-insight-btn">
                                                <i class="fas fa-chart-bar"></i> View Details
                                            </button>
                                        </div>

                                        <div class="family-member-card">
                                            <div class="family-member-avatar">AD</div>
                                            <div class="family-member-name">Alex Doe</div>
                                            <div class="family-member-role">Child</div>
                                            <div class="family-member-wealth" data-private="34,56,500" data-placeholder="">34,56,500</div>
                                            <div style="font-size: 0.8rem; color: var(--success); margin-top: 0.5rem;">+25.7% growth | 14% of family wealth</div>
                                            <button onclick="openMemberInsights('alex')" class="member-insight-btn">
                                                <i class="fas fa-chart-bar"></i> View Details
                                            </button>
                                        </div>

                                        <div class="family-member-card add-family-member" onclick="inviteFamilyMember()" style="border: 2px dashed var(--border); cursor: pointer;">
                                            <div style="color: var(--text-secondary); font-size: 2rem; margin-bottom: 1rem;">+</div>
                                            <div class="family-member-name">Invite Member</div>
                                            <div class="family-member-role">Add family member</div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="transactions-section">
                                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                                    <h4 style="margin: 0; color: var(--text-primary);">Upcoming Events</h4>
                                    <button onclick="openCalendarModal()" class="btn btn-secondary" style="padding: 0.5rem 1rem;">
                                        <i class="fas fa-calendar-alt"></i>
                                        View Calendar
                                    </button>
                                </div>
                                <table class="transactions-table">
                                    <thead>
                                        <tr>
                                            <th>Date</th>
                                            <th>Event</th>
                                            <th>Type</th>
                                            <th>Amount</th>
                                            <th>Status</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr onclick="showEventDetails('emi')" style="cursor: pointer;">
                                            <td>Jan 25</td>
                                            <td>Home Loan EMI - SBI</td>
                                            <td><span class="transaction-type" style="background: #fee2e2; color: #dc2626;">EMI Due</span></td>
                                            <td style="color: var(--danger); font-weight: 600;" data-private="22,450" data-placeholder="">22,450</td>
                                            <td><span style="color: #f59e0b; font-weight: 500;"> Pending</span></td>
                                        </tr>
                                        <tr onclick="showEventDetails('sip')" style="cursor: pointer;">
                                            <td>Jan 28</td>
                                            <td>SIP - Axis Bluechip Fund</td>
                                            <td><span class="transaction-type" style="background: #d1fae5; color: #059669;">SIP</span></td>
                                            <td style="color: var(--success); font-weight: 600;" data-private="15,000" data-placeholder="">15,000</td>
                                            <td><span style="color: var(--success); font-weight: 500;"> Auto-pay</span></td>
                                        </tr>
                                        <tr onclick="showEventDetails('insurance')" style="cursor: pointer;">
                                            <td>Feb 02</td>
                                            <td>Health Insurance Premium - HDFC ERGO</td>
                                            <td><span class="transaction-type" style="background: #dbeafe; color: #2563eb;">Insurance</span></td>
                                            <td style="color: var(--primary); font-weight: 600;" data-private="8,500" data-placeholder="">8,500</td>
                                            <td><span style="color: #f59e0b; font-weight: 500;"> Due Soon</span></td>
                                        </tr>
                                        <tr onclick="showEventDetails('bill')" style="cursor: pointer;">
                                            <td>Feb 05</td>
                                            <td>Postpaid Bill - Airtel</td>
                                            <td><span class="transaction-type" style="background: #fef3c7; color: #f59e0b;">Bill</span></td>
                                            <td style="color: var(--warning); font-weight: 600;" data-private="1,250" data-placeholder="">1,250</td>
                                            <td><span style="color: #059669; font-weight: 500;"> Auto-pay</span></td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                `;
            }
        }

        // Load Page Function
        function loadPage(pageName) {
            const mainContent = document.getElementById('main-content');
            if (!mainContent) return;
            
            if (pageName === 'account') {
                loadAccountPageContent();
            } else if (pageName === 'landing') {
                loadLandingPageContent();
            } else {
                loadLandingPageContent();
            }
        }

        // Load Landing Page
        function loadLandingPageContent() {
            const mainContent = document.getElementById('main-content');
            if (mainContent) {
                mainContent.innerHTML = `
                    <section class="hero">
                        <div class="hero-content">
                            <h1 class="hero-title">Your Money. Your Way. Your Data.</h1>
                            <p class="hero-subtitle">A DIY personal finance platform. Track your net worth, assets, and investments in one place  no clutter, no spam, no data tracking. Just you and your finances.</p>
                            <div class="cta-buttons">
                                <button onclick="openLoginModal()" class="btn btn-primary">
                                    <i class="fas fa-rocket"></i>
                                    Get Started Free
                                </button>
                                <button onclick="openProductsModal()" class="btn btn-secondary">
                                    <i class="fas fa-th-large"></i>
                                    See Features
                                </button>
                            </div>
                        </div>
                    </section>

                    <section class="features-section">
                        <h2 class="section-title">One Place. Complete Picture.</h2>
                        <p class="section-subtitle">Track everything you own  accounts, investments, assets  without the noise. No ads, no upsells, no distractions.</p>
                        
                        <div class="features-grid">
                            <div class="feature-card">
                                <div class="feature-icon" style="background: #dbeafe; color: var(--primary);">
                                    <i class="fas fa-mobile-alt"></i>
                                </div>
                                <h3 class="feature-title">Instant UPI Payments</h3>
                                <p class="feature-description">Send and receive money instantly using UPI. Pay bills, split expenses, and transfer funds with just a phone number or UPI ID.</p>
                            </div>

                            <div class="feature-card">
                                <div class="feature-icon" style="background: #d1fae5; color: var(--success);">
                                    <i class="fas fa-university"></i>
                                </div>
                                <h3 class="feature-title">Account Aggregation</h3>
                                <p class="feature-description">Connect all your bank accounts, credit cards, and investments. Get a unified view of your complete financial picture.</p>
                            </div>

                            <div class="feature-card">
                                <div class="feature-icon" style="background: #fef3c7; color: var(--warning);">
                                    <i class="fas fa-chart-line"></i>
                                </div>
                                <h3 class="feature-title">Investment Tracking</h3>
                                <p class="feature-description">Monitor your mutual funds, stocks, and SIP investments. Track performance and get personalized investment insights.</p>
                            </div>
                        </div>
                    </section>

                    <section class="security-section">
                        <h2 class="section-title">Bank-Grade Security</h2>
                        <p class="section-subtitle">Your money and data are protected with the highest security standards.</p>
                        
                        <div class="security-features">
                            <div class="security-card">
                                <div class="security-icon">
                                    <i class="fas fa-fingerprint"></i>
                                </div>
                                <h3>Biometric Authentication</h3>
                                <p>Login with fingerprint or face recognition. Your biometrics never leave your device.</p>
                            </div>

                            <div class="security-card">
                                <div class="security-icon">
                                    <i class="fas fa-lock"></i>
                                </div>
                                <h3>256-bit Encryption</h3>
                                <p>All data is encrypted using military-grade AES-256 encryption, same as banks use.</p>
                            </div>
                        </div>
                    </section>
                `;
            }
        }

        // Load Account Page
        function loadAccountPageContent() {
            const mainContent = document.getElementById('main-content');
            if (mainContent) {
                mainContent.innerHTML = `
                    <section class="account-section">
                        <div class="account-container">
                            <div class="profile-header">
                                <div class="profile-avatar">
                                    <div class="avatar-circle" id="userAvatar">
                                        <span id="avatarInitials">U</span>
                                    </div>
                                </div>
                                <div class="profile-info">
                                    <h1 class="profile-name" id="profileDisplayName">Hi, User</h1>
                                    <div class="account-status-alert">
                                        <i class="fas fa-exclamation-triangle"></i>
                                        <span>Complete your financial profile to unlock all investment and banking features.</span>
                                        <button onclick="openProfileSetupModal()" class="btn-complete">Complete Setup</button>
                                    </div>
                                </div>
                            </div>

                            <div class="profile-details-section">
                                <div class="profile-details-grid">
                                    <div class="profile-form-card">
                                        <h3>Complete Your Profile</h3>
                                        <p>Share a few details to personalise your insights and have them show up instantly.</p>
                                        <form id="profileDetailsForm" class="profile-form">
                                            <div class="form-row">
                                                <label for="profileFullName">Full Name</label>
                                                <input type="text" id="profileFullName" name="fullName" placeholder="John Doe" required>
                                            </div>
                                            <div class="form-row">
                                                <label for="profileEmail">Email</label>
                                                <input type="email" id="profileEmail" name="email" placeholder="john@example.com">
                                            </div>
                                            <div class="form-row">
                                                <label for="profilePhone">Mobile Number</label>
                                                <input type="tel" id="profilePhone" name="phone" placeholder="+91 98765 43210" required>
                                            </div>
                                            <div class="form-row">
                                                <label for="profileCity">City</label>
                                                <input type="text" id="profileCity" name="city" placeholder="Mumbai">
                                            </div>
                                            <div class="form-row">
                                                <label for="profileOccupation">Occupation</label>
                                                <input type="text" id="profileOccupation" name="occupation" placeholder="e.g., Product Manager">
                                            </div>
                                            <div class="form-row">
                                                <label for="profileIncome">Monthly Income</label>
                                                <select id="profileIncome" name="income">
                                                    <option value="">Select range</option>
                                                    <option value="Below 50K">Below 50K</option>
                                                    <option value="50K - 1L">50K - 1L</option>
                                                    <option value="1L - 2L">1L - 2L</option>
                                                    <option value="2L+">2L+</option>
                                                </select>
                                            </div>
                                            <div class="form-row">
                                                <label for="profileGoals">Primary Financial Goal</label>
                                                <textarea id="profileGoals" name="goals" placeholder="Tell us what you are working towards"></textarea>
                                            </div>
                                            <button type="submit" class="btn btn-primary">
                                                <i class="fas fa-save"></i> Save Details
                                            </button>
                                            <p class="form-hint">Saved securely on this device for a personalised experience.</p>
                                        </form>
                                    </div>
                                    <div class="profile-summary-card">
                                        <h3>Saved Details</h3>
                                        <p>We use these details to tailor recommendations.</p>
                                        <div id="profileDetailsDisplay" class="profile-details-display empty">
                                            <p>No details yet. Fill the form to see them here.</p>
                                        </div>
                                        <button type="button" class="btn btn-secondary profile-clear-btn" onclick="clearProfileDetails()">
                                            <i class="fas fa-trash"></i> Clear Details
                                        </button>
                                    </div>
                                </div>
                            </div>

                            <!-- Settings Card as part of account management -->
                            <div class="account-grid-header">
                                <h2>My Account</h2>
                            </div>

                            <div class="account-management-grid">
                                <!-- Row 1 -->
                                <div class="account-card" onclick="openBankAccounts()">
                                    <div class="card-icon" style="color: #059669;">
                                        <i class="fas fa-university"></i>
                                    </div>
                                    <div class="card-content">
                                        <h3>Bank Accounts</h3>
                                        <p>Manage linked bank accounts & balances</p>
                                    </div>
                                </div>

                                <div class="account-card" onclick="openMyProfile()">
                                    <div class="card-icon" style="color: #3b82f6;">
                                        <i class="fas fa-user-circle"></i>
                                    </div>
                                    <div class="card-content">
                                        <h3>My Profile</h3>
                                        <p>Personal details, contact & address</p>
                                    </div>
                                </div>

                                <!-- Row 2 -->
                                <div class="account-card" onclick="openSettingsPreferences()">
                                    <div class="card-icon" style="color: #8b5cf6;">
                                        <i class="fas fa-cog"></i>
                                    </div>
                                    <div class="card-content">
                                        <h3>Settings & Preferences</h3>
                                        <p>Privacy mode, themes, notifications</p>
                                    </div>
                                </div>

                                <div class="account-card" onclick="openInsurance()">
                                    <div class="card-icon" style="color: #10b981;">
                                        <i class="fas fa-shield-alt"></i>
                                    </div>
                                    <div class="card-content">
                                        <h3>Insurance</h3>
                                        <p>Health, Life, Motor insurance policies</p>
                                    </div>
                                </div>

                                <!-- Row 3 -->
                                <div class="account-card" onclick="openRealEstateGold()">
                                    <div class="card-icon" style="color: #f59e0b;">
                                        <i class="fas fa-home"></i>
                                    </div>
                                    <div class="card-content">
                                        <h3>Real Estate & Gold</h3>
                                        <p>Property & gold investment tracking</p>
                                    </div>
                                </div>

                                <div class="account-card" onclick="openPasswordSecurity()">
                                    <div class="card-icon" style="color: #dc2626;">
                                        <i class="fas fa-lock"></i>
                                    </div>
                                    <div class="card-content">
                                        <h3>Password & Security</h3>
                                        <p>Change password, 2FA & security settings</p>
                                    </div>
                                </div>

                                <!-- Row 4 -->
                                <div class="account-card" onclick="openInvestments()">
                                    <div class="card-icon" style="color: #8b5cf6;">
                                        <i class="fas fa-chart-line"></i>
                                    </div>
                                    <div class="card-content">
                                        <h3>Investments</h3>
                                        <p>Mutual funds, SIPs & portfolio tracking</p>
                                    </div>
                                </div>

                                <div class="account-card" onclick="openAuthorizations()">
                                    <div class="card-icon" style="color: #06b6d4;">
                                        <i class="fas fa-key"></i>
                                    </div>
                                    <div class="card-content">
                                        <h3>Authorizations</h3>
                                        <p>API access, third-party permissions</p>
                                    </div>
                                </div>

                                <!-- Row 5 -->
                                <div class="account-card" onclick="openCalendarReminders()">
                                    <div class="card-icon" style="color: #84cc16;">
                                        <i class="fas fa-calendar-alt"></i>
                                    </div>
                                    <div class="card-content">
                                        <h3>Calendar & Reminders</h3>
                                        <p>SIP dates, bill payments & notifications</p>
                                    </div>
                                </div>

                                <div class="account-card" onclick="openTaxServices()">
                                    <div class="card-icon" style="color: #f97316;">
                                        <i class="fas fa-file-invoice-dollar"></i>
                                    </div>
                                    <div class="card-content">
                                        <h3>Tax Services</h3>
                                        <p>ITR filing, tax planning & CA consultation</p>
                                    </div>
                                </div>
                            </div>
                             
                            <div class="quick-actions">
                                <h3>Quick Actions</h3>
                                <div class="quick-actions-grid">
                                    <button onclick="loadDashboard()" class="quick-action-btn">
                                        <i class="fas fa-chart-line"></i>
                                        <span>Dashboard</span>
                                    </button>
                                    <button onclick="exportAccountData()" class="quick-action-btn">
                                        <i class="fas fa-download"></i>
                                        <span>Export Data</span>
                                    </button>
                                    <button onclick="logout()" class="quick-action-btn danger">
                                        <i class="fas fa-sign-out-alt"></i>
                                        <span>Logout</span>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </section>
                `;
                
                setTimeout(() => {
                    loadStoredProfileDetails();
                    setUserInfo();
                    setupProfileDetailsForm();
                    initializeEnhancedFeatures();
                }, 100);
            }
        }

        // Services Modal
        function openProductsModal() {
            const modal = document.getElementById('serviceModal');
            const title = document.getElementById('serviceModalTitle');
            const subtitle = document.getElementById('serviceModalSubtitle');
            const body = document.getElementById('serviceModalBody');
            
            title.textContent = 'Fintpe Products';
            subtitle.textContent = 'Complete financial services for modern India';
            body.innerHTML = `
                <div class="service-grid">
                    <div class="service-item" onclick="alert('Financial Calculators coming soon!')">
                        <h4><i class="fas fa-calculator"></i> Financial Calculators</h4>
                        <p>EMI, SIP, FD, PPF, Retirement & Tax calculators</p>
                    </div>
                    <div class="service-item" onclick="alert('UPI Payments coming soon!')">
                        <h4><i class="fas fa-mobile-alt"></i> UPI Payments</h4>
                        <p>Send & receive money instantly using UPI</p>
                    </div>
                    <div class="service-item" onclick="alert('Investment Tracking coming soon!')">
                        <h4><i class="fas fa-chart-line"></i> Investment Tracking</h4>
                        <p>Track mutual funds, stocks, SIPs with insights</p>
                    </div>
                </div>
            `;
            
            modal.style.display = 'block';
        }

        function closeServiceModal() {
            document.getElementById('serviceModal').style.display = 'none';
        }

        const ACCOUNT_MANAGEMENT_SECTIONS = {
            bankAccounts: {
                title: 'Bank Accounts',
                subtitle: 'Store your linked bank details securely on this device.',
                storageKey: 'fintpe_bank_accounts',
                formTitle: 'Add Bank Account',
                listTitle: 'Saved Bank Accounts',
                emptyState: 'No bank accounts added yet. Add your first account to get started.',
                ctaText: 'Save Bank Details',
                fields: [
                    { name: 'bankName', label: 'Bank Name', type: 'text', placeholder: 'State Bank of India', required: true },
                    { name: 'accountType', label: 'Account Type', type: 'select', required: true, options: ['Savings', 'Current', 'Salary', 'NRE/NRO', 'Other'] },
                    { name: 'accountNumber', label: 'Account Number (last 4 digits)', type: 'text', placeholder: '1234', required: true, maxlength: 20 },
                    { name: 'ifsc', label: 'IFSC Code', type: 'text', placeholder: 'SBIN0001234' },
                    { name: 'balance', label: 'Current Balance', type: 'number', placeholder: '98500', prefix: '' },
                    { name: 'notes', label: 'Notes', type: 'textarea', placeholder: 'Primary salary account' }
                ]
            },
            insurance: {
                title: 'Insurance Policies',
                subtitle: 'Track all your insurance coverage in one place.',
                storageKey: 'fintpe_insurance',
                formTitle: 'Add Insurance Policy',
                listTitle: 'Saved Policies',
                emptyState: 'No insurance policies added yet.',
                ctaText: 'Save Policy',
                fields: [
                    { name: 'provider', label: 'Provider', type: 'text', placeholder: 'HDFC Life', required: true },
                    { name: 'policyType', label: 'Policy Type', type: 'select', required: true, options: ['Health', 'Life', 'Term', 'Motor', 'Travel', 'Other'] },
                    { name: 'policyNumber', label: 'Policy Number', type: 'text', placeholder: 'POL123456', required: true },
                    { name: 'coverage', label: 'Coverage Amount', type: 'number', placeholder: '2500000', prefix: '' },
                    { name: 'premium', label: 'Premium (per year)', type: 'number', placeholder: '35000', prefix: '' },
                    { name: 'renewalDate', label: 'Next Renewal Date', type: 'date' },
                    { name: 'notes', label: 'Notes', type: 'textarea', placeholder: 'Covers entire family' }
                ]
            },
            realEstateGold: {
                title: 'Real Estate & Gold',
                subtitle: 'Keep quick notes on your tangible assets.',
                storageKey: 'fintpe_realestate_gold',
                formTitle: 'Add Asset',
                listTitle: 'Saved Assets',
                emptyState: 'No assets added yet.',
                ctaText: 'Save Asset',
                fields: [
                    { name: 'assetType', label: 'Asset Type', type: 'select', required: true, options: ['Real Estate', 'Gold', 'Other'] },
                    { name: 'assetName', label: 'Asset Name / Description', type: 'text', placeholder: '2BHK - Pune', required: true },
                    { name: 'location', label: 'Location', type: 'text', placeholder: 'Pune, Maharashtra' },
                    { name: 'currentValue', label: 'Current Value', type: 'number', placeholder: '4500000', prefix: '' },
                    { name: 'ownership', label: 'Ownership Share', type: 'text', placeholder: '50%' },
                    { name: 'notes', label: 'Notes', type: 'textarea', placeholder: 'Jointly owned with spouse' }
                ]
            },
            investments: {
                title: 'Investments',
                subtitle: 'Track SIPs, stocks and deposits you care about.',
                storageKey: 'fintpe_investments',
                formTitle: 'Add Investment',
                listTitle: 'Saved Investments',
                emptyState: 'No investments recorded yet.',
                ctaText: 'Save Investment',
                fields: [
                    { name: 'instrument', label: 'Instrument', type: 'text', placeholder: 'Nippon India Growth Fund', required: true },
                    { name: 'category', label: 'Category', type: 'select', required: true, options: ['Mutual Fund', 'Stock', 'FD', 'Bond', 'SIP', 'ETF', 'Other'] },
                    { name: 'holding', label: 'Holding Value', type: 'number', placeholder: '150000', prefix: '' },
                    { name: 'goal', label: 'Goal / Purpose', type: 'text', placeholder: 'Retirement corpus' },
                    { name: 'nextAction', label: 'Next Action Date', type: 'date' },
                    { name: 'notes', label: 'Notes', type: 'textarea', placeholder: 'SIP every 1st of month' }
                ]
            },
            calendarReminders: {
                title: 'Calendar & Reminders',
                subtitle: 'Never miss a due date again.',
                storageKey: 'fintpe_reminders',
                formTitle: 'Add Reminder',
                listTitle: 'Upcoming Reminders',
                emptyState: 'No reminders added yet.',
                ctaText: 'Save Reminder',
                fields: [
                    { name: 'title', label: 'Reminder Title', type: 'text', placeholder: 'SIP - Growth Fund', required: true },
                    { name: 'reminderType', label: 'Reminder Type', type: 'select', required: true, options: ['SIP Payment', 'Bill Payment', 'Tax', 'Insurance', 'Investment', 'Other'] },
                    { name: 'reminderDate', label: 'Date', type: 'date', required: true },
                    { name: 'amount', label: 'Amount', type: 'number', placeholder: '15000', prefix: '' },
                    { name: 'notes', label: 'Notes', type: 'textarea', placeholder: 'Auto-debit from HDFC salary account' }
                ]
            },
            authorizations: {
                title: 'Authorizations',
                subtitle: 'Track which platforms have access to your financial data.',
                storageKey: 'fintpe_authorizations',
                formTitle: 'Add Authorization',
                listTitle: 'Linked Platforms',
                emptyState: 'No authorizations stored yet.',
                ctaText: 'Save Authorization',
                fields: [
                    { name: 'platform', label: 'Platform / App', type: 'text', placeholder: 'Zerodha', required: true },
                    { name: 'accessLevel', label: 'Access Level', type: 'select', required: true, options: ['View Only', 'Read', 'Write', 'Full Access'] },
                    { name: 'linkedAccounts', label: 'Linked Accounts', type: 'text', placeholder: 'SBI Savings, ICICI Demat' },
                    { name: 'expiresOn', label: 'Access Expires On', type: 'date' },
                    { name: 'notes', label: 'Notes', type: 'textarea', placeholder: 'Revoke if inactive for 90 days' }
                ]
            },
            taxServices: {
                title: 'Tax Services',
                subtitle: 'Keep a checklist of your ITR filings and documents.',
                storageKey: 'fintpe_tax',
                formTitle: 'Add Tax Item',
                listTitle: 'Tax Checklist',
                emptyState: 'No tax tasks tracked yet.',
                ctaText: 'Save Tax Item',
                fields: [
                    { name: 'document', label: 'Document / Filing', type: 'text', placeholder: 'ITR-2 Filing', required: true },
                    { name: 'assessmentYear', label: 'Assessment Year', type: 'text', placeholder: '2024-25', required: true },
                    { name: 'status', label: 'Status', type: 'select', required: true, options: ['Pending', 'In Progress', 'Completed', 'Need Review'] },
                    { name: 'dueDate', label: 'Due Date', type: 'date' },
                    { name: 'preparedBy', label: 'Prepared By', type: 'text', placeholder: 'Self / CA Name' },
                    { name: 'notes', label: 'Notes', type: 'textarea', placeholder: 'Awaiting Form 16 from employer' }
                ]
            },
            passwordSecurity: {
                title: 'Password & Security',
                subtitle: 'Log your last password or PIN update for each service.',
                storageKey: 'fintpe_security',
                formTitle: 'Add Security Item',
                listTitle: 'Security Checklist',
                emptyState: 'No security items recorded yet.',
                ctaText: 'Save Security Item',
                fields: [
                    { name: 'item', label: 'Security Item', type: 'text', placeholder: 'Netbanking PIN', required: true },
                    { name: 'status', label: 'Status', type: 'select', required: true, options: ['Active', 'Needs Update', 'Expired'] },
                    { name: 'lastUpdated', label: 'Last Updated On', type: 'date' },
                    { name: 'notes', label: 'Notes', type: 'textarea', placeholder: 'Rotate every 90 days' }
                ]
            }
        };

        function openAccountManagementSection(sectionKey) {
            const config = ACCOUNT_MANAGEMENT_SECTIONS[sectionKey];
            if (!config) return;
            
            const modal = document.getElementById('serviceModal');
            const title = document.getElementById('serviceModalTitle');
            const subtitle = document.getElementById('serviceModalSubtitle');
            const body = document.getElementById('serviceModalBody');
            
            title.textContent = config.title;
            subtitle.textContent = config.subtitle;
            body.innerHTML = buildManagementModalContent(sectionKey, config);
            attachManagementForm(sectionKey);
            renderManagementRecords(sectionKey);
            modal.style.display = 'block';
        }

        function buildManagementModalContent(sectionKey, config) {
            const formId = `${sectionKey}ManagementForm`;
            const recordsId = `${sectionKey}Records`;
            const editFieldId = `${sectionKey}EditIndex`;
            
            const fieldsHtml = config.fields.map(field => buildManagementField(field, sectionKey)).join('');
            
            return `
                <div class="management-grid">
                    <div class="management-form-card">
                        <h3>${config.formTitle || 'Add Entry'}</h3>
                        <form id="${formId}">
                            ${fieldsHtml}
                            <input type="hidden" id="${editFieldId}" value="-1">
                            <button type="submit" class="btn btn-primary">
                                <i class="fas fa-save"></i> ${config.ctaText || 'Save'}
                            </button>
                        </form>
                    </div>
                    <div class="management-records-card">
                        <h3>${config.listTitle || 'Saved Entries'}</h3>
                        <div id="${recordsId}" class="record-list"></div>
                    </div>
                </div>
            `;
        }

        function buildManagementField(field, sectionKey) {
            const inputId = `${sectionKey}_${field.name}`;
            const requiredAttr = field.required ? 'required' : '';
            const maxAttr = field.maxlength ? `maxlength="${field.maxlength}"` : '';
            const placeholder = field.placeholder ? `placeholder="${field.placeholder}"` : '';
            
            if (field.type === 'textarea') {
                return `
                    <div class="management-field">
                        <label for="${inputId}">${field.label}</label>
                        <textarea id="${inputId}" name="${field.name}" ${placeholder} ${requiredAttr}></textarea>
                    </div>
                `;
            }
            
            if (field.type === 'select') {
                const placeholderOption = `<option value="" ${field.required ? 'disabled selected' : 'selected'}>${field.selectPlaceholder || 'Select an option'}</option>`;
                const options = (field.options || []).map(option => `<option value="${option}">${option}</option>`).join('');
                
                return `
                    <div class="management-field">
                        <label for="${inputId}">${field.label}</label>
                        <select id="${inputId}" name="${field.name}" ${requiredAttr}>
                            ${placeholderOption}
                            ${options}
                        </select>
                    </div>
                `;
            }
            
            const type = field.type === 'number' ? 'number' : field.type === 'date' ? 'date' : 'text';
            const stepAttr = field.type === 'number' ? 'step="any"' : '';
            
            return `
                <div class="management-field">
                    <label for="${inputId}">${field.label}</label>
                    <input type="${type}" id="${inputId}" name="${field.name}" ${placeholder} ${requiredAttr} ${maxAttr} ${stepAttr}>
                </div>
            `;
        }

        function attachManagementForm(sectionKey) {
            const form = document.getElementById(`${sectionKey}ManagementForm`);
            if (!form) return;
            
            form.addEventListener('submit', function(event) {
                event.preventDefault();
                const config = ACCOUNT_MANAGEMENT_SECTIONS[sectionKey];
                if (!config) return;
                
                const formData = new FormData(form);
                const entry = {};
                config.fields.forEach(field => {
                    entry[field.name] = (formData.get(field.name) || '').toString().trim();
                });
                
                const editIndexField = document.getElementById(`${sectionKey}EditIndex`);
                const editIndex = editIndexField ? parseInt(editIndexField.value, 10) : -1;
                const data = getAccountManagementData(sectionKey);
                
                if (editIndex >= 0 && data[editIndex]) {
                    data[editIndex] = entry;
                } else {
                    data.push(entry);
                }
                
                saveAccountManagementData(sectionKey, data);
                renderManagementRecords(sectionKey);
                form.reset();
                if (editIndexField) editIndexField.value = -1;
                showSuccessMessage(editIndex >= 0 ? 'Details updated' : 'Details saved');
            });
        }

        function getAccountManagementData(sectionKey) {
            const config = ACCOUNT_MANAGEMENT_SECTIONS[sectionKey];
            if (!config) return [];
            
            const raw = localStorage.getItem(config.storageKey);
            if (!raw) return [];
            
            try {
                const parsed = JSON.parse(raw);
                return Array.isArray(parsed) ? parsed : [];
            } catch (error) {
                return [];
            }
        }

        function saveAccountManagementData(sectionKey, data) {
            const config = ACCOUNT_MANAGEMENT_SECTIONS[sectionKey];
            if (!config) return;
            localStorage.setItem(config.storageKey, JSON.stringify(data));
        }

        function renderManagementRecords(sectionKey) {
            const config = ACCOUNT_MANAGEMENT_SECTIONS[sectionKey];
            if (!config) return;
            
            const container = document.getElementById(`${sectionKey}Records`);
            if (!container) return;
            
            const data = getAccountManagementData(sectionKey);
            if (!data.length) {
                container.innerHTML = `<div class="management-empty-state">${config.emptyState}</div>`;
                return;
            }
            
            container.innerHTML = data.map((entry, index) => `
                <div class="record-card">
                    ${config.fields.map(field => {
                        const value = entry[field.name];
                        if (!value) return '';
                        return `
                            <div class="record-row">
                                <span>${field.label}</span>
                                <strong>${formatManagementValue(field, value)}</strong>
                            </div>
                        `;
                    }).join('')}
                    <div class="record-actions">
                        <button type="button" data-section="${sectionKey}" data-index="${index}" data-action="edit">
                            <i class="fas fa-pen"></i> Edit
                        </button>
                        <button type="button" class="danger" data-section="${sectionKey}" data-index="${index}" data-action="delete">
                            <i class="fas fa-trash"></i> Delete
                        </button>
                    </div>
                </div>
            `).join('');
            
            container.querySelectorAll('button[data-action]').forEach(button => {
                button.addEventListener('click', function() {
                    handleManagementRecordAction(this.dataset.section, this.dataset.action, parseInt(this.dataset.index, 10));
                });
            });
        }

        function formatManagementValue(field, value) {
            if (!value) return '';
            let displayValue = value;
            
            if (field.type === 'date') {
                const parsed = new Date(value);
                if (!isNaN(parsed.getTime())) {
                    displayValue = parsed.toLocaleDateString('en-IN', { day: '2-digit', month: 'short', year: 'numeric' });
                }
            }
            
            if (field.type === 'number' && !isNaN(Number(value))) {
                const numberValue = Number(value);
                displayValue = numberValue.toLocaleString('en-IN', { maximumFractionDigits: 2 });
            }
            
            if (field.prefix) {
                displayValue = `${field.prefix}${displayValue}`;
            }
            
            if (field.suffix) {
                displayValue = `${displayValue}${field.suffix}`;
            }
            
            return displayValue;
        }

        function handleManagementRecordAction(sectionKey, action, index) {
            const config = ACCOUNT_MANAGEMENT_SECTIONS[sectionKey];
            if (!config) return;
            
            const data = getAccountManagementData(sectionKey);
            if (!data[index]) return;
            
            if (action === 'delete') {
                if (!confirm('Delete this entry?')) return;
                data.splice(index, 1);
                saveAccountManagementData(sectionKey, data);
                renderManagementRecords(sectionKey);
                showSuccessMessage('Entry deleted');
                return;
            }
            
            if (action === 'edit') {
                const form = document.getElementById(`${sectionKey}ManagementForm`);
                const editIndexField = document.getElementById(`${sectionKey}EditIndex`);
                if (!form) return;
                
                config.fields.forEach(field => {
                    const element = form.elements[field.name];
                    if (element) {
                        element.value = data[index][field.name] || '';
                    }
                });
                
                if (editIndexField) editIndexField.value = index;
                showSuccessMessage('Loaded entry for editing');
            }
        }

        // Enhanced Features
        let currentTheme = 'light';
        let privacyModeEnabled = false;
        const USER_PROFILE_STORAGE_KEY = 'fintpe_profile_details';
        let userProfileData = null;

        function toggleTheme() {
            const newTheme = currentTheme === 'light' ? 'dark' : 'light';
            setTheme(newTheme);
        }

        function setTheme(theme) {
            document.body.setAttribute('data-theme', theme);
            currentTheme = theme;
            
            const themeToggle = document.getElementById('themeToggle');
            if (themeToggle) {
                if (theme === 'dark') {
                    themeToggle.classList.add('active');
                } else {
                    themeToggle.classList.remove('active');
                }
            }
            
            localStorage.setItem('fintpe_theme', theme);
            showSuccessMessage(`${theme === 'dark' ? 'Dark' : 'Light'} theme activated`);
        }

        function togglePrivacyMode() {
            setPrivacyMode(!privacyModeEnabled);
        }

        function setPrivacyMode(enabled) {
            privacyModeEnabled = enabled;
            
            const privacyToggle = document.getElementById('privacyToggle');
            if (privacyToggle) {
                if (enabled) {
                    privacyToggle.classList.add('active');
                } else {
                    privacyToggle.classList.remove('active');
                }
            }
            
            localStorage.setItem('fintpe_privacy', enabled);
            showSuccessMessage(`Privacy mode ${enabled ? 'enabled' : 'disabled'}`);
        }

        function initializeEnhancedFeatures() {
            const savedTheme = localStorage.getItem('fintpe_theme') || 'light';
            const savedPrivacy = localStorage.getItem('fintpe_privacy') === 'true';
            
            if (savedTheme === 'dark') {
                setTheme('dark');
            }
            
            if (savedPrivacy) {
                setPrivacyMode(true);
            }
        }

        function setUserInfo() {
            const nameElement = document.getElementById('profileDisplayName');
            const initialsElement = document.getElementById('avatarInitials');
            let displayName = 'User';
            let initials = 'U';

            if (userProfileData && userProfileData.fullName) {
                displayName = userProfileData.fullName.trim();
                const nameParts = displayName.split(' ').filter(Boolean);
                if (nameParts.length) {
                    initials = nameParts.slice(0, 2).map(part => part.charAt(0).toUpperCase()).join('');
                } else {
                    initials = displayName.charAt(0).toUpperCase();
                }
            } else if (userEmail) {
                const emailName = userEmail.split('@')[0];
                displayName = emailName.charAt(0).toUpperCase() + emailName.slice(1);
                initials = emailName.charAt(0).toUpperCase();
            }
            
            if (nameElement) nameElement.textContent = `Hi, ${displayName}`;
            if (initialsElement) initialsElement.textContent = initials || 'U';
        }

        function loadStoredProfileDetails() {
            const storedProfile = localStorage.getItem(USER_PROFILE_STORAGE_KEY);
            if (storedProfile) {
                try {
                    userProfileData = JSON.parse(storedProfile);
                } catch (error) {
                    userProfileData = null;
                }
            } else {
                userProfileData = null;
            }
        }

        function setupProfileDetailsForm() {
            const form = document.getElementById('profileDetailsForm');
            if (!form) return;

            if (!userProfileData) {
                loadStoredProfileDetails();
            }

            const fields = ['fullName', 'email', 'phone', 'city', 'occupation', 'income', 'goals'];
            fields.forEach(field => {
                const element = form.elements[field];
                if (!element) return;
                const storedValue = userProfileData ? userProfileData[field] : '';
                if (storedValue) {
                    element.value = storedValue;
                } else if (field === 'email' && userEmail) {
                    element.value = userEmail;
                }
            });

            updateProfileDetailsDisplay();

            form.addEventListener('submit', function(e) {
                e.preventDefault();
                const formData = new FormData(form);
                const profile = {
                    fullName: (formData.get('fullName') || '').trim(),
                    email: (formData.get('email') || '').trim(),
                    phone: (formData.get('phone') || '').trim(),
                    city: (formData.get('city') || '').trim(),
                    occupation: (formData.get('occupation') || '').trim(),
                    income: formData.get('income') || '',
                    goals: (formData.get('goals') || '').trim()
                };

                userProfileData = profile;
                localStorage.setItem(USER_PROFILE_STORAGE_KEY, JSON.stringify(profile));
                updateProfileDetailsDisplay();
                setUserInfo();
                showSuccessMessage('Profile details updated!');
            });
        }

        function updateProfileDetailsDisplay() {
            const display = document.getElementById('profileDetailsDisplay');
            if (!display) return;

            if (!userProfileData || !userProfileData.fullName) {
                display.classList.add('empty');
                display.innerHTML = '<p>No details yet. Fill the form to see them here.</p>';
                return;
            }

            const details = [
                { label: 'Full Name', value: userProfileData.fullName },
                { label: 'Email', value: userProfileData.email },
                { label: 'Mobile Number', value: userProfileData.phone },
                { label: 'City', value: userProfileData.city },
                { label: 'Occupation', value: userProfileData.occupation },
                { label: 'Monthly Income', value: userProfileData.income },
                { label: 'Financial Goal', value: userProfileData.goals }
            ].filter(detail => detail.value);

            display.classList.remove('empty');
            display.innerHTML = '';

            details.forEach(detail => {
                const row = document.createElement('div');
                row.className = 'profile-detail-item';
                const label = document.createElement('span');
                label.className = 'profile-detail-label';
                label.textContent = detail.label;
                const value = document.createElement('span');
                value.className = 'profile-detail-value';
                value.textContent = detail.value;
                row.appendChild(label);
                row.appendChild(value);
                display.appendChild(row);
            });
        }

        function clearProfileDetails() {
            userProfileData = null;
            localStorage.removeItem(USER_PROFILE_STORAGE_KEY);

            const form = document.getElementById('profileDetailsForm');
            if (form) {
                form.reset();
                if (userEmail && form.elements['email']) {
                    form.elements['email'].value = userEmail;
                }
            }

            updateProfileDetailsDisplay();
            setUserInfo();
            showSuccessMessage('Profile details cleared');
        }

        function focusProfileDetailsSection() {
            const profileSection = document.querySelector('.profile-details-section');
            if (!profileSection) {
                alert('Open the My Account page to update your profile.');
                return;
            }
            
            profileSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
            profileSection.classList.add('section-highlight');
            setTimeout(() => profileSection.classList.remove('section-highlight'), 1800);
        }

        // Utility Functions
        function getFinancialData() {
            return {
                totalBalance: 349904,
                totalInvestments: 185920,
                monthlyInvestment: 15000,
                monthlyExpenses: 32450,
                monthlyIncome: 85000,
                creditScore: 785
            };
        }

        function saveSession() {
            if (userEmail) {
                localStorage.setItem('fintpe_user_email', userEmail);
            }
        }

        function clearSession() {
            localStorage.removeItem('fintpe_user_email');
        }

        function showSuccessMessage(message) {
            const notification = document.createElement('div');
            notification.className = 'success-notification';
            notification.innerHTML = `
                <i class="fas fa-check-circle"></i>
                <span>${message}</span>
            `;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                if (notification && notification.parentNode) {
                    notification.remove();
                }
            }, 3000);
        }

        function resendOTP() {
            alert('OTP resent successfully! Use any 6 digits for demo.');
        }

        function logout() {
            if (confirm('Are you sure you want to logout?')) {
                isLoggedIn = false;
                userEmail = '';
                clearSession();
                loadPage('landing');
                
                const loginBtn = document.getElementById('loginBtn');
                if (loginBtn) {
                    loginBtn.innerHTML = 'Login';
                    loginBtn.onclick = openLoginModal;
                }
                
                showSuccessMessage('Logged out successfully!');
            }
        }

        // Family View Functions
        let dashboardFamilyViewEnabled = false;
        let accountFamilyViewEnabled = false;

        function toggleDashboardFamilyView() {
            dashboardFamilyViewEnabled = !dashboardFamilyViewEnabled;
            
            const individualView = document.getElementById('dashboardIndividualView');
            const familyView = document.getElementById('dashboardFamilyView');
            const toggleButton = document.getElementById('dashboardFamilyToggle');
            
            if (dashboardFamilyViewEnabled) {
                if (individualView) individualView.style.display = 'none';
                if (familyView) familyView.style.display = 'block';
                if (toggleButton) {
                    toggleButton.innerHTML = '<i class="fas fa-user"></i> Individual View';
                }
                showSuccessMessage('Switched to Family Dashboard View');
            } else {
                if (individualView) individualView.style.display = 'block';
                if (familyView) familyView.style.display = 'none';
                if (toggleButton) {
                    toggleButton.innerHTML = '<i class="fas fa-users"></i> Family View';
                }
                showSuccessMessage('Switched to Individual Dashboard View');
            }
        }

        function toggleFamilyView() {
            accountFamilyViewEnabled = !accountFamilyViewEnabled;
            
            const individualView = document.getElementById('individualDashboard');
            const familyView = document.getElementById('familyDashboard');
            const toggleButton = document.getElementById('familyViewToggle');
            
            if (accountFamilyViewEnabled) {
                if (individualView) individualView.style.display = 'none';
                if (familyView) {
                    familyView.style.display = 'block';
                    loadFamilyMembers();
                }
                if (toggleButton) toggleButton.textContent = 'Switch to Individual View';
                showSuccessMessage('Switched to Family Account View');
            } else {
                if (individualView) individualView.style.display = 'block';
                if (familyView) familyView.style.display = 'none';
                if (toggleButton) toggleButton.textContent = 'Switch to Family View';
                showSuccessMessage('Switched to Individual Account View');
            }
        }

        function loadFamilyMembers() {
            const familyContainer = document.getElementById('familyMembersContainer');
            if (!familyContainer) return;
            
            const familyMembers = [
                { name: 'John Doe', role: 'You', wealth: '7,85,920', avatar: 'JD' },
                { name: 'Jane Doe', role: 'Spouse', wealth: '3,25,470', avatar: 'JD' },
                { name: 'Alex Doe', role: 'Child', wealth: '34,500', avatar: 'AD' }
            ];
            
            familyContainer.innerHTML = familyMembers.map(member => `
                <div class="family-member-card">
                    <div class="family-member-avatar">${member.avatar}</div>
                    <div class="family-member-name">${member.name}</div>
                    <div class="family-member-role">${member.role}</div>
                    <div class="family-member-wealth" data-private="${member.wealth}" data-placeholder="">${member.wealth}</div>
                </div>
            `).join('');
            
            // Add invite member card
            familyContainer.innerHTML += `
                <div class="family-member-card add-family-member" onclick="inviteFamilyMember()" style="border: 2px dashed var(--border); cursor: pointer;">
                    <div style="color: var(--text-secondary); font-size: 2rem; margin-bottom: 1rem;">+</div>
                    <div class="family-member-name">Invite Member</div>
                    <div class="family-member-role">Add family member</div>
                </div>
            `;
            
            // Apply privacy mode if enabled
            if (privacyModeEnabled) {
                setTimeout(() => setPrivacyMode(true), 100);
            }
        }

        function inviteFamilyMember() {
            const email = prompt('Enter family member email:');
            if (email && email.includes('@')) {
                showSuccessMessage(`Invitation sent to ${email}`);
            } else if (email) {
                alert('Please enter a valid email address');
            }
        }

        // Settings & Preferences Modal
        function openSettingsPreferences() {
            // Create modal for settings
            const settingsModal = document.createElement('div');
            settingsModal.className = 'modal';
            settingsModal.style.display = 'block';
            settingsModal.innerHTML = `
                <div class="modal-content" style="max-width: 600px;">
                    <div class="modal-header">
                        <span class="close" onclick="closeSettingsModal()">&times;</span>
                        <h2>Settings & Preferences</h2>
                        <p>Customize your Fintpe experience</p>
                    </div>
                    <div class="modal-body">
                        <div class="settings-toggle-section" style="background: transparent; padding: 0; border: none; box-shadow: none;">
                            <div class="toggle-setting-item">
                                <div class="toggle-setting-info">
                                    <h3>Privacy mode</h3>
                                    <p>Hide sensitive financial information with blur effect. When enabled, all amounts and balances will be hidden across the app.</p>
                                </div>
                                <button class="ios-toggle" id="modalPrivacyToggle" onclick="togglePrivacyModeFromModal()">
                                    <div class="ios-toggle-slider"></div>
                                </button>
                            </div>

                            <div class="toggle-setting-item">
                                <div class="toggle-setting-info">
                                    <h3>Dark theme</h3>
                                    <p>Switch between light and dark theme for comfortable viewing. Dark theme reduces eye strain in low-light conditions.</p>
                                </div>
                                <button class="ios-toggle" id="modalThemeToggle" onclick="toggleThemeFromModal()">
                                    <div class="ios-toggle-slider"></div>
                                </button>
                            </div>

                            <div class="toggle-setting-item">
                                <div class="toggle-setting-info">
                                    <h3>Email notifications</h3>
                                    <p>Receive email notifications for important account activities, transactions, and updates.</p>
                                </div>
                                <button class="ios-toggle active" id="modalEmailToggle" onclick="toggleEmailNotificationsFromModal()">
                                    <div class="ios-toggle-slider"></div>
                                </button>
                            </div>

                            <div class="toggle-setting-item">
                                <div class="toggle-setting-info">
                                    <h3>SMS alerts</h3>
                                    <p>Get SMS alerts for transactions, low balance warnings, and security notifications.</p>
                                </div>
                                <button class="ios-toggle active" id="modalSmsToggle" onclick="toggleSmsAlertsFromModal()">
                                    <div class="ios-toggle-slider"></div>
                                </button>
                            </div>

                            <div class="toggle-setting-item">
                                <div class="toggle-setting-info">
                                    <h3>Biometric login</h3>
                                    <p>Enable fingerprint or face recognition for faster and more secure login.</p>
                                </div>
                                <button class="ios-toggle" id="modalBiometricToggle" onclick="toggleBiometricLogin()">
                                    <div class="ios-toggle-slider"></div>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            document.body.appendChild(settingsModal);
            settingsModal.id = 'settingsModal';
            
            // Sync toggle states
            setTimeout(() => {
                const savedTheme = localStorage.getItem('fintpe_theme');
                const savedPrivacy = localStorage.getItem('fintpe_privacy') === 'true';
                
                if (savedTheme === 'dark') {
                    document.getElementById('modalThemeToggle').classList.add('active');
                }
                if (savedPrivacy) {
                    document.getElementById('modalPrivacyToggle').classList.add('active');
                }
            }, 100);
        }

        function closeSettingsModal() {
            const modal = document.getElementById('settingsModal');
            if (modal) {
                modal.remove();
            }
        }

        function togglePrivacyModeFromModal() {
            setPrivacyMode(!privacyModeEnabled);
        }

        function toggleThemeFromModal() {
            const newTheme = currentTheme === 'light' ? 'dark' : 'light';
            setTheme(newTheme);
        }

        function toggleEmailNotificationsFromModal() {
            const toggle = document.getElementById('modalEmailToggle');
            if (toggle) {
                toggle.classList.toggle('active');
                const enabled = toggle.classList.contains('active');
                showSuccessMessage(`Email notifications ${enabled ? 'enabled' : 'disabled'}`);
            }
        }

        function toggleSmsAlertsFromModal() {
            const toggle = document.getElementById('modalSmsToggle');
            if (toggle) {
                toggle.classList.toggle('active');
                const enabled = toggle.classList.contains('active');
                showSuccessMessage(`SMS alerts ${enabled ? 'enabled' : 'disabled'}`);
            }
        }

        // Calendar Modal Functions
        let selectedDate = new Date();
        let currentMonth = new Date().getMonth();
        let currentYear = new Date().getFullYear();

        const upcomingEvents = {
            '2025-01-25': [
                { type: 'emi', title: 'Home Loan EMI', details: 'SBI Home Loan', amount: '22,450', status: 'pending' }
            ],
            '2025-01-28': [
                { type: 'sip', title: 'SIP Investment', details: 'Axis Bluechip Fund', amount: '15,000', status: 'auto' }
            ],
            '2025-02-02': [
                { type: 'insurance', title: 'Health Insurance', details: 'HDFC ERGO Premium', amount: '8,500', status: 'due' }
            ],
            '2025-02-05': [
                { type: 'bill', title: 'Postpaid Bill', details: 'Airtel Mobile', amount: '1,250', status: 'auto' }
            ],
            '2025-02-10': [
                { type: 'sip', title: 'SIP Investment', details: 'HDFC Top 100 Fund', amount: '10,000', status: 'auto' }
            ],
            '2025-02-12': [
                { type: 'emi', title: 'Car Loan EMI', details: 'HDFC Auto Loan', amount: '8,450', status: 'pending' }
            ],
            '2025-02-15': [
                { type: 'bill', title: 'Credit Card Bill', details: 'HDFC Regalia', amount: '15,670', status: 'due' },
                { type: 'bill', title: 'Electricity Bill', details: 'Maharashtra State', amount: '2,850', status: 'pending' }
            ]
        };

        function openCalendarModal() {
            const calendarModal = document.createElement('div');
            calendarModal.className = 'calendar-modal';
            calendarModal.style.display = 'block';
            calendarModal.id = 'calendarModal';

            const today = new Date();
            const todayKey = formatDateKey(today);
            selectedDate = today;

            calendarModal.innerHTML = `
                <div class="calendar-modal-content">
                    <div class="calendar-modal-header">
                        <span class="close" onclick="closeCalendarModal()">&times;</span>
                        <h2><i class="fas fa-calendar-alt"></i> Financial Calendar</h2>
                        <p>Track all your upcoming financial events and commitments</p>
                    </div>
                    <div class="calendar-modal-body">
                        <div class="calendar-container">
                            <div class="calendar-grid">
                                <div class="calendar-header">
                                    <button onclick="previousMonth()" class="calendar-nav-btn">
                                        <i class="fas fa-chevron-left"></i>
                                    </button>
                                    <span id="monthYearDisplay">${getMonthName(currentMonth)} ${currentYear}</span>
                                    <button onclick="nextMonth()" class="calendar-nav-btn">
                                        <i class="fas fa-chevron-right"></i>
                                    </button>
                                </div>
                                <div class="calendar-days">
                                    <div class="calendar-day-header">Sun</div>
                                    <div class="calendar-day-header">Mon</div>
                                    <div class="calendar-day-header">Tue</div>
                                    <div class="calendar-day-header">Wed</div>
                                    <div class="calendar-day-header">Thu</div>
                                    <div class="calendar-day-header">Fri</div>
                                    <div class="calendar-day-header">Sat</div>
                                    <div id="calendarDaysContainer">
                                        <!-- Calendar days will be generated here -->
                                    </div>
                                </div>
                            </div>
                            
                            <div class="calendar-events-panel">
                                <div class="selected-date-header" id="selectedDateHeader">
                                    Today - ${formatDisplayDate(today)}
                                </div>
                                <div class="event-list" id="eventsList">
                                    <!-- Events for selected date will appear here -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;

            document.body.appendChild(calendarModal);
            generateCalendarDays();
            updateEventsPanel(todayKey);
        }

        function closeCalendarModal() {
            const modal = document.getElementById('calendarModal');
            if (modal) {
                modal.remove();
            }
        }

        function generateCalendarDays() {
            const container = document.getElementById('calendarDaysContainer');
            if (!container) return;

            const firstDay = new Date(currentYear, currentMonth, 1);
            const lastDay = new Date(currentYear, currentMonth + 1, 0);
            const startDate = new Date(firstDay);
            startDate.setDate(startDate.getDate() - firstDay.getDay());

            let daysHTML = '';
            const today = new Date();

            for (let i = 0; i < 42; i++) {
                const currentDate = new Date(startDate);
                currentDate.setDate(startDate.getDate() + i);
                
                const dateKey = formatDateKey(currentDate);
                const events = upcomingEvents[dateKey] || [];
                
                let classes = ['calendar-day'];
                if (currentDate.getMonth() !== currentMonth) {
                    classes.push('other-month');
                }
                if (currentDate.toDateString() === today.toDateString()) {
                    classes.push('today');
                }
                if (currentDate.toDateString() === selectedDate.toDateString()) {
                    classes.push('selected');
                }

                let eventDots = '';
                events.forEach(event => {
                    eventDots += `<span class="event-dot ${event.type}"></span>`;
                });

                daysHTML += `
                    <div class="${classes.join(' ')}" onclick="selectDate('${dateKey}')">
                        <div class="calendar-day-number">${currentDate.getDate()}</div>
                        <div>${eventDots}</div>
                    </div>
                `;
            }

            container.innerHTML = daysHTML;
        }

        function selectDate(dateKey) {
            const [year, month, day] = dateKey.split('-');
            selectedDate = new Date(year, month - 1, day);
            
            // Update visual selection
            document.querySelectorAll('.calendar-day').forEach(day => {
                day.classList.remove('selected');
            });
            event.target.closest('.calendar-day').classList.add('selected');
            
            updateEventsPanel(dateKey);
        }

        function updateEventsPanel(dateKey) {
            const eventsContainer = document.getElementById('eventsList');
            const headerElement = document.getElementById('selectedDateHeader');
            
            if (!eventsContainer || !headerElement) return;

            const [year, month, day] = dateKey.split('-');
            const date = new Date(year, month - 1, day);
            headerElement.textContent = formatDisplayDate(date);

            const events = upcomingEvents[dateKey] || [];

            if (events.length === 0) {
                eventsContainer.innerHTML = `
                    <div style="text-align: center; color: var(--text-secondary); padding: 2rem;">
                        <i class="fas fa-calendar-check" style="font-size: 2rem; margin-bottom: 1rem; opacity: 0.5;"></i>
                        <p>No events scheduled for this date</p>
                    </div>
                `;
                return;
            }

            eventsContainer.innerHTML = events.map(event => `
                <div class="event-item" onclick="showEventDetails('${event.type}')">
                    <div class="event-title">
                        <span class="event-dot ${event.type}"></span>
                        ${event.title}
                    </div>
                    <div class="event-details">
                        <span>${event.details}</span>
                        <span class="event-amount" style="color: ${getEventColor(event.type)};">${event.amount}</span>
                    </div>
                    <div style="font-size: 0.8rem; color: var(--text-secondary); margin-top: 0.5rem;">
                        Status: ${getStatusDisplay(event.status)}
                    </div>
                </div>
            `).join('');
        }

        function previousMonth() {
            currentMonth--;
            if (currentMonth < 0) {
                currentMonth = 11;
                currentYear--;
            }
            updateCalendarDisplay();
        }

        function nextMonth() {
            currentMonth++;
            if (currentMonth > 11) {
                currentMonth = 0;
                currentYear++;
            }
            updateCalendarDisplay();
        }

        function updateCalendarDisplay() {
            const monthYearDisplay = document.getElementById('monthYearDisplay');
            if (monthYearDisplay) {
                monthYearDisplay.textContent = `${getMonthName(currentMonth)} ${currentYear}`;
            }
            generateCalendarDays();
        }

        function formatDateKey(date) {
            const year = date.getFullYear();
            const month = String(date.getMonth() + 1).padStart(2, '0');
            const day = String(date.getDate()).padStart(2, '0');
            return `${year}-${month}-${day}`;
        }

        function formatDisplayDate(date) {
            const today = new Date();
            const tomorrow = new Date(today);
            tomorrow.setDate(tomorrow.getDate() + 1);

            if (date.toDateString() === today.toDateString()) {
                return 'Today - ' + date.toLocaleDateString('en-IN', { 
                    weekday: 'long', 
                    year: 'numeric', 
                    month: 'long', 
                    day: 'numeric' 
                });
            } else if (date.toDateString() === tomorrow.toDateString()) {
                return 'Tomorrow - ' + date.toLocaleDateString('en-IN', { 
                    weekday: 'long', 
                    year: 'numeric', 
                    month: 'long', 
                    day: 'numeric' 
                });
            } else {
                return date.toLocaleDateString('en-IN', { 
                    weekday: 'long', 
                    year: 'numeric', 
                    month: 'long', 
                    day: 'numeric' 
                });
            }
        }

        function getMonthName(monthIndex) {
            const months = [
                'January', 'February', 'March', 'April', 'May', 'June',
                'July', 'August', 'September', 'October', 'November', 'December'
            ];
            return months[monthIndex];
        }

        function getEventColor(eventType) {
            switch (eventType) {
                case 'emi': return 'var(--danger)';
                case 'sip': return 'var(--success)';
                case 'insurance': return 'var(--primary)';
                case 'bill': return 'var(--warning)';
                default: return 'var(--text-primary)';
            }
        }

        function getStatusDisplay(status) {
            switch (status) {
                case 'pending': return ' Pending Action';
                case 'auto': return ' Auto-pay Enabled';
                case 'due': return ' Due Soon';
                default: return status;
            }
        }

        function showEventDetails(eventType) {
            const eventDetails = {
                'emi': {
                    title: 'EMI Payment Details',
                    content: 'Home Loan EMI of 22,450 is due on January 25th. Auto-pay is disabled for this account. Please ensure sufficient balance or set up auto-pay to avoid late fees.'
                },
                'sip': {
                    title: 'SIP Investment Details',
                    content: 'Your SIP of 15,000 in Axis Bluechip Fund is scheduled for January 28th. Auto-pay is enabled from your savings account. This is your 18th installment.'
                },
                'insurance': {
                    title: 'Insurance Premium Details',
                    content: 'Health Insurance premium of 8,500 for HDFC ERGO is due on February 2nd. Annual premium with 15% discount applied. Coverage: 10 Lakhs.'
                },
                'bill': {
                    title: 'Bill Payment Details',
                    content: 'Airtel postpaid bill of 1,250 is due on February 5th. Includes unlimited calls, 75GB data, and OTT subscriptions. Auto-pay is enabled.'
                }
            };

            const details = eventDetails[eventType];
            if (details) {
                alert(`${details.title}\n\n${details.content}`);
            }
        }

        // Enhanced Family Insight Functions
        function openNetWorthInsights() {
            createInsightModal('Family Net Worth Analysis', 'Complete wealth breakdown and asset allocation', [
                {
                    title: 'Total Net Worth',
                    icon: 'fas fa-crown',
                    value: '2,45,67,890',
                    description: 'Total assets minus liabilities across all family members',
                    change: '+4,85,320 this quarter (+2.01%)'
                },
                {
                    title: 'Asset Breakdown',
                    icon: 'fas fa-chart-pie',
                    value: '2,67,89,450',
                    description: 'Real Estate: 32% | Investments: 48% | Gold: 5% | Cash: 15%',
                    progress: 85
                },
                {
                    title: 'Liabilities',
                    icon: 'fas fa-credit-card',
                    value: '22,21,560',
                    description: 'Home Loan: 18,50,000 | Credit Cards: 2,45,000 | Personal: 1,26,560'
                },
                {
                    title: 'Wealth Growth Rate',
                    icon: 'fas fa-trending-up',
                    value: '+18.5% YoY',
                    description: 'Consistent wealth building with diversified portfolio strategy'
                }
            ]);
        }

        function openRealEstateInsights() {
            createInsightModal('Real Estate Portfolio', 'Property investments and market analysis', [
                {
                    title: 'Total Property Value',
                    icon: 'fas fa-home',
                    value: '85,50,000',
                    description: 'Current market valuation of family properties',
                    change: '+8.5% appreciation this year'
                },
                {
                    title: 'Primary Residence',
                    icon: 'fas fa-house-user',
                    value: '65,00,000',
                    description: '3BHK apartment in Mumbai | Purchased: 52,00,000 (2019)',
                    progress: 76
                },
                {
                    title: 'Investment Property',
                    icon: 'fas fa-building',
                    value: '20,50,000',
                    description: '2BHK rental property | Monthly rent: 18,000',
                    progress: 24
                },
                {
                    title: 'Market Outlook',
                    icon: 'fas fa-chart-area',
                    value: 'Positive',
                    description: 'Properties in growth areas with 6-8% expected annual appreciation'
                }
            ]);
        }

        function openGoldInsights() {
            createInsightModal('Gold Holdings Portfolio', 'Precious metals investment tracking', [
                {
                    title: 'Total Gold Value',
                    icon: 'fas fa-coins',
                    value: '12,45,600',
                    description: 'Combined physical and digital gold investments',
                    change: '+12.8% vs average purchase price'
                },
                {
                    title: 'Physical Gold',
                    icon: 'fas fa-gem',
                    value: '185 grams',
                    description: 'Jewelry: 120g | Coins: 45g | Bars: 20g | Avg price: 5,200/g',
                    progress: 68
                },
                {
                    title: 'Digital Gold',
                    icon: 'fas fa-mobile-alt',
                    value: '55 grams',
                    description: 'Gold ETFs and digital gold platforms | Avg price: 5,450/g',
                    progress: 32
                },
                {
                    title: 'Gold Strategy',
                    icon: 'fas fa-shield-alt',
                    value: '5% Allocation',
                    description: 'Hedge against inflation | Target: 7-10% of total portfolio'
                }
            ]);
        }

        function openFamilyBalanceInsights() {
            createInsightModal('Liquid Assets Analysis', 'Cash and readily available funds', [
                {
                    title: 'Total Liquid Assets',
                    icon: 'fas fa-tint',
                    value: '18,45,890',
                    description: 'Immediately accessible funds across all accounts',
                    change: '+32,450 this month'
                },
                {
                    title: 'Emergency Fund',
                    icon: 'fas fa-shield-alt',
                    value: '6,50,000',
                    description: '6 months of expenses covered | Target achieved ',
                    progress: 100
                },
                {
                    title: 'Account Distribution',
                    icon: 'fas fa-university',
                    value: '5 Accounts',
                    description: 'Savings: 8,50,000 | Current: 4,95,890 | FD: 5,00,000'
                },
                {
                    title: 'Monthly Inflow',
                    icon: 'fas fa-arrow-down',
                    value: '1,27,000',
                    description: 'John: 85,000 | Jane: 42,000 | Interest: 2,500'
                }
            ]);
        }

        function openFamilyInvestmentInsights() {
            createInsightModal('Investment Portfolio Analysis', 'Comprehensive investment breakdown', [
                {
                    title: 'Total Investment Value',
                    icon: 'fas fa-chart-line',
                    value: '1,28,54,200',
                    description: 'Diversified investment portfolio across asset classes',
                    change: '+15.2% returns (YTD)'
                },
                {
                    title: 'Mutual Funds',
                    icon: 'fas fa-chart-area',
                    value: '85,20,000',
                    description: 'Equity: 60% | Debt: 30% | Hybrid: 10% | 22 active SIPs',
                    progress: 66
                },
                {
                    title: 'Direct Stocks',
                    icon: 'fas fa-chart-bar',
                    value: '32,50,000',
                    description: 'Blue-chip stocks and growth companies | 15 holdings',
                    progress: 25
                },
                {
                    title: 'Fixed Deposits',
                    icon: 'fas fa-piggy-bank',
                    value: '10,84,200',
                    description: 'Conservative allocation | Average return: 6.5% p.a.',
                    progress: 9
                }
            ]);
        }

        function openFamilySpendingInsights() {
            createInsightModal('Family Spending Analysis', 'Monthly expense breakdown and trends', [
                {
                    title: 'Monthly Family Spending',
                    icon: 'fas fa-credit-card',
                    value: '78,650',
                    description: 'Total family expenses this month',
                    change: '-5,200 vs last month (6.2% reduction)'
                },
                {
                    title: 'Housing & Utilities',
                    icon: 'fas fa-home',
                    value: '28,500',
                    description: 'Rent/EMI: 22,000 | Utilities: 4,500 | Maintenance: 2,000',
                    progress: 36
                },
                {
                    title: 'Food & Dining',
                    icon: 'fas fa-utensils',
                    value: '18,200',
                    description: 'Groceries: 12,000 | Dining out: 4,500 | Online orders: 1,700',
                    progress: 23
                },
                {
                    title: 'Transport & Travel',
                    icon: 'fas fa-car',
                    value: '12,450',
                    description: 'Fuel: 7,500 | Public transport: 2,950 | Maintenance: 2,000',
                    progress: 16
                }
            ]);
        }

        function openFamilyGoalsInsights() {
            createInsightModal('Family Financial Goals', 'Progress tracking for major objectives', [
                {
                    title: 'House Down Payment',
                    icon: 'fas fa-home',
                    value: '65,00,000',
                    description: 'Target: 80,00,000 for dream home | Timeline: 2 years',
                    progress: 81
                },
                {
                    title: 'Children Education Fund',
                    icon: 'fas fa-graduation-cap',
                    value: '18,50,000',
                    description: 'Target: 35,00,000 for Alex\'s higher education',
                    progress: 53
                },
                {
                    title: 'Retirement Corpus',
                    icon: 'fas fa-umbrella',
                    value: '85,00,000',
                    description: 'Target: 3,50,00,000 for comfortable retirement',
                    progress: 24
                },
                {
                    title: 'Emergency Fund',
                    icon: 'fas fa-shield-alt',
                    value: '6,50,000',
                    description: 'Target: 6,50,000 (6 months expenses) | Status: Complete ',
                    progress: 100
                }
            ]);
        }

        function openMemberInsights(memberName) {
            const memberData = {
                'john': {
                    name: 'John Doe',
                    role: 'Primary Account Holder',
                    insights: [
                        {
                            title: 'Personal Balance',
                            icon: 'fas fa-wallet',
                            value: '7,85,920',
                            description: 'Across 3 accounts: Savings, Salary, Investment',
                            change: '+12.5% growth this year'
                        },
                        {
                            title: 'Monthly Income',
                            icon: 'fas fa-hand-holding-usd',
                            value: '85,000',
                            description: 'Primary income source for family',
                        },
                        {
                            title: 'Investment Portfolio',
                            icon: 'fas fa-chart-line',
                            value: '5,85,000',
                            description: 'Mutual Funds: 3,50,000 | Stocks: 2,35,000',
                            progress: 65
                        },
                        {
                            title: 'Spending Pattern',
                            icon: 'fas fa-credit-card',
                            value: '35,200',
                            description: 'Monthly average: Housing 40% | Food 25% | Transport 15%'
                        }
                    ]
                },
                'jane': {
                    name: 'Jane Doe',
                    role: 'Spouse & Co-contributor',
                    insights: [
                        {
                            title: 'Personal Balance',
                            icon: 'fas fa-wallet',
                            value: '6,25,470',
                            description: 'Freelance earnings + savings account',
                            change: '+18.2% growth this year'
                        },
                        {
                            title: 'Freelance Income',
                            icon: 'fas fa-laptop',
                            value: '42,000',
                            description: 'Variable monthly income from consulting'
                        },
                        {
                            title: 'Investment Focus',
                            icon: 'fas fa-seedling',
                            value: 'SIP Focused',
                            description: '15,000 monthly SIP in diversified funds',
                            progress: 80
                        },
                        {
                            title: 'Spending Pattern',
                            icon: 'fas fa-shopping-cart',
                            value: '28,500',
                            description: 'Healthcare 30% | Education 25% | Personal 45%'
                        }
                    ]
                },
                'alex': {
                    name: 'Alex Doe',
                    role: 'Child - Education Fund',
                    insights: [
                        {
                            title: 'Education Fund',
                            icon: 'fas fa-graduation-cap',
                            value: '4,34,500',
                            description: 'Dedicated education savings account',
                            change: '+25.7% growth this year'
                        },
                        {
                            title: 'Monthly Contribution',
                            icon: 'fas fa-piggy-bank',
                            value: '8,000',
                            description: 'Regular contributions from both parents'
                        },
                        {
                            title: 'Future Target',
                            icon: 'fas fa-target',
                            value: '25,00,000',
                            description: 'Higher education fund target by age 18',
                            progress: 17
                        },
                        {
                            title: 'Investment Mix',
                            icon: 'fas fa-chart-pie',
                            value: 'Conservative',
                            description: 'Equity 40% | Debt 50% | Gold 10% (Age-appropriate)'
                        }
                    ]
                }
            };

            const member = memberData[memberName];
            if (member) {
                createInsightModal(`${member.name} - Financial Insights`, member.role, member.insights);
            }
        }

        function createInsightModal(title, subtitle, insights) {
            // Remove existing insight modal
            const existingModal = document.getElementById('insightModal');
            if (existingModal) {
                existingModal.remove();
            }

            const modal = document.createElement('div');
            modal.className = 'insight-modal';
            modal.style.display = 'block';
            modal.id = 'insightModal';

            modal.innerHTML = `
                <div class="insight-modal-content">
                    <div class="insight-modal-header">
                        <span class="close" onclick="closeInsightModal()">&times;</span>
                        <h2>${title}</h2>
                        <p>${subtitle}</p>
                    </div>
                    <div class="insight-modal-body">
                        <div class="insights-grid">
                            ${insights.map(insight => `
                                <div class="insight-card">
                                    <h4><i class="${insight.icon}"></i> ${insight.title}</h4>
                                    <div class="insight-value">${insight.value}</div>
                                    ${insight.change ? `<div style="color: var(--success); font-size: 0.9rem; margin-bottom: 0.5rem;">${insight.change}</div>` : ''}
                                    ${insight.progress ? `
                                        <div class="progress-bar-container">
                                            <div class="progress-bar-fill" style="width: ${insight.progress}%; background: linear-gradient(90deg, var(--primary), var(--success));"></div>
                                        </div>
                                    ` : ''}
                                    <div class="insight-description">${insight.description}</div>
                                </div>
                            `).join('')}
                        </div>
                        
                        <div style="text-align: center; margin-top: 2rem;">
                            <button onclick="exportInsights()" class="btn btn-secondary" style="margin-right: 1rem;">
                                <i class="fas fa-download"></i> Export Report
                            </button>
                            <button onclick="scheduleReview()" class="btn btn-primary">
                                <i class="fas fa-calendar-plus"></i> Schedule Review
                            </button>
                        </div>
                    </div>
                </div>
            `;

            document.body.appendChild(modal);

            // Animate progress bars
            setTimeout(() => {
                const progressBars = modal.querySelectorAll('.progress-bar-fill');
                progressBars.forEach(bar => {
                    const width = bar.style.width;
                    bar.style.width = '0%';
                    setTimeout(() => {
                        bar.style.width = width;
                    }, 100);
                });
            }, 300);
        }

        function closeInsightModal() {
            const modal = document.getElementById('insightModal');
            if (modal) {
                modal.remove();
            }
        }

        function exportInsights() {
            showSuccessMessage(' Insights report exported successfully!');
            closeInsightModal();
        }

        function scheduleReview() {
            showSuccessMessage(' Review meeting scheduled successfully!');
            closeInsightModal();
        }

        // Individual Dashboard Insight Functions
        function openIndividualNetWorthInsights() {
            createInsightModal('Your Personal Net Worth', 'Complete breakdown of your individual wealth', [
                {
                    title: 'Your Net Worth',
                    icon: 'fas fa-user-crown',
                    value: '1,25,85,920',
                    description: 'Your total assets minus liabilities',
                    change: '+2,15,450 this quarter (+1.8%)'
                },
                {
                    title: 'Asset Distribution',
                    icon: 'fas fa-chart-pie',
                    value: '1,42,50,920',
                    description: 'Investments: 46% | Real Estate: 32% | Gold: 5% | Cash: 17%',
                    progress: 88
                },
                {
                    title: 'Your Liabilities',
                    icon: 'fas fa-credit-card',
                    value: '16,65,000',
                    description: 'Home Loan: 12,50,000 | Car Loan: 3,15,000 | Credit Card: 1,00,000'
                },
                {
                    title: 'Wealth Ranking',
                    icon: 'fas fa-trophy',
                    value: 'Top 15%',
                    description: 'Among your peer group (30-35 years, IT professionals)'
                }
            ]);
        }

        function openIndividualBalanceInsights() {
            createInsightModal('Your Liquid Assets', 'Cash and readily available funds breakdown', [
                {
                    title: 'Total Liquid Balance',
                    icon: 'fas fa-wallet',
                    value: '9,85,920',
                    description: 'Immediately accessible funds across your accounts',
                    change: '+18,450 this month'
                },
                {
                    title: 'Primary Savings',
                    icon: 'fas fa-piggy-bank',
                    value: '5,50,000',
                    description: 'SBI Savings Account | Interest: 3.5% p.a.',
                    progress: 56
                },
                {
                    title: 'Salary Account',
                    icon: 'fas fa-briefcase',
                    value: '2,85,920',
                    description: 'HDFC Salary Account | Monthly inflow: 85,000',
                    progress: 29
                },
                {
                    title: 'Fixed Deposit',
                    icon: 'fas fa-certificate',
                    value: '1,50,000',
                    description: 'Emergency fund | 6.8% p.a. | Matures in 8 months',
                    progress: 15
                }
            ]);
        }

        function openIndividualInvestmentInsights() {
            createInsightModal('Your Investment Portfolio', 'Personal investment analysis and performance', [
                {
                    title: 'Total Investment Value',
                    icon: 'fas fa-chart-line',
                    value: '65,85,000',
                    description: 'Your personal investment portfolio',
                    change: '+14.2% returns (YTD)'
                },
                {
                    title: 'Mutual Funds',
                    icon: 'fas fa-chart-area',
                    value: '42,00,000',
                    description: 'Equity: 65% | Debt: 25% | Hybrid: 10% | 12 SIPs active',
                    progress: 64
                },
                {
                    title: 'Direct Stocks',
                    icon: 'fas fa-chart-bar',
                    value: '18,50,000',
                    description: 'Tech stocks: 60% | Banking: 25% | Pharma: 15%',
                    progress: 28
                },
                {
                    title: 'ELSS (Tax Saving)',
                    icon: 'fas fa-shield-alt',
                    value: '5,35,000',
                    description: 'Tax saving funds | 3-year lock-in | 1.5L limit utilized',
                    progress: 8
                }
            ]);
        }

        function openIndividualRealEstateInsights() {
            createInsightModal('Your Real Estate Holdings', 'Property investments and valuations', [
                {
                    title: 'Total Property Value',
                    icon: 'fas fa-home',
                    value: '45,50,000',
                    description: 'Current market value of your property share',
                    change: '+7.2% appreciation this year'
                },
                {
                    title: 'Primary Residence Share',
                    icon: 'fas fa-house-user',
                    value: '35,00,000',
                    description: '60% ownership in family home (Mumbai) | Co-owned with spouse',
                    progress: 77
                },
                {
                    title: 'Investment Plot',
                    icon: 'fas fa-map-marked',
                    value: '10,50,000',
                    description: '500 sq ft plot in Pune | Purchased 2021 | Ready for development',
                    progress: 23
                },
                {
                    title: 'Rental Potential',
                    icon: 'fas fa-key',
                    value: '0',
                    description: 'Primary residence occupied | Plot undeveloped'
                }
            ]);
        }

        function openIndividualGoldInsights() {
            createInsightModal('Your Gold Portfolio', 'Personal precious metals investment', [
                {
                    title: 'Total Gold Value',
                    icon: 'fas fa-coins',
                    value: '6,85,000',
                    description: 'Your share of family gold holdings',
                    change: '+11.5% vs average purchase price'
                },
                {
                    title: 'Physical Gold',
                    icon: 'fas fa-gem',
                    value: '95 grams',
                    description: 'Gold coins: 25g | Investment bars: 15g | Jewelry share: 55g',
                    progress: 68
                },
                {
                    title: 'Digital Gold',
                    icon: 'fas fa-mobile-alt',
                    value: '35 grams',
                    description: 'Gold ETF: 20g | Digital gold apps: 15g | Avg price: 5,450/g',
                    progress: 32
                },
                {
                    title: 'Portfolio Allocation',
                    icon: 'fas fa-percentage',
                    value: '4.8%',
                    description: 'Gold as % of total portfolio | Recommended: 5-10%'
                }
            ]);
        }

        function openIndividualSpendingInsights() {
            createInsightModal('Your Spending Analysis', 'Personal expense breakdown and patterns', [
                {
                    title: 'Monthly Personal Spending',
                    icon: 'fas fa-credit-card',
                    value: '35,450',
                    description: 'Your individual expenses this month',
                    change: '-2,100 vs last month (5.6% reduction)'
                },
                {
                    title: 'Food & Dining',
                    icon: 'fas fa-utensils',
                    value: '12,500',
                    description: 'Office lunches: 6,000 | Dinner/weekend: 4,500 | Coffee: 2,000',
                    progress: 35
                },
                {
                    title: 'Transportation',
                    icon: 'fas fa-car',
                    value: '8,200',
                    description: 'Fuel: 5,500 | Uber/Ola: 1,700 | Maintenance: 1,000',
                    progress: 23
                },
                {
                    title: 'Personal & Shopping',
                    icon: 'fas fa-shopping-bag',
                    value: '6,750',
                    description: 'Clothing: 3,500 | Electronics: 2,000 | Miscellaneous: 1,250',
                    progress: 19
                }
            ]);
        }

        function openIndividualLoansInsights() {
            createInsightModal('Your Loans & EMIs', 'Personal debt management and repayment schedule', [
                {
                    title: 'Total Outstanding',
                    icon: 'fas fa-hand-holding-usd',
                    value: '16,65,000',
                    description: 'Your total loan liabilities',
                    change: 'Monthly EMI: 28,450'
                },
                {
                    title: 'Home Loan',
                    icon: 'fas fa-home',
                    value: '12,50,000',
                    description: 'SBI Home Loan | 7.5% interest | 12 years remaining',
                    progress: 62
                },
                {
                    title: 'Car Loan',
                    icon: 'fas fa-car',
                    value: '3,15,000',
                    description: 'HDFC Auto Loan | 8.2% interest | 3.5 years remaining',
                    progress: 45
                },
                {
                    title: 'Credit Card Outstanding',
                    icon: 'fas fa-credit-card',
                    value: '1,00,000',
                    description: 'Total across 3 cards | Avg interest: 18% p.a. | Pay off recommended',
                    progress: 100
                }
            ]);
        }

        // Family Loans Insight Function
        function openFamilyLoansInsights() {
            createInsightModal('Family Loans Overview', 'Complete family debt management and EMI schedule', [
                {
                    title: 'Total Family Debt',
                    icon: 'fas fa-hand-holding-usd',
                    value: '22,21,560',
                    description: 'Combined loan liabilities across family',
                    change: 'Combined monthly EMI: 42,850'
                },
                {
                    title: 'Primary Home Loan',
                    icon: 'fas fa-home',
                    value: '18,50,000',
                    description: 'Joint home loan | 7.5% interest | 15 years remaining | John & Jane',
                    progress: 58
                },
                {
                    title: 'Vehicle Loans',
                    icon: 'fas fa-car',
                    value: '2,45,000',
                    description: 'John\'s car: 3,15,000 | Jane\'s scooter: 85,000 (remaining)',
                    progress: 32
                },
                {
                    title: 'Credit Cards',
                    icon: 'fas fa-credit-card',
                    value: '1,26,560',
                    description: 'John: 1,00,000 | Jane: 26,560 | Combined limit: 8,50,000',
                    progress: 15
                }
            ]);
        }

        // All the missing account management functions
        function openRealEstateGold() {
            openAccountManagementSection('realEstateGold');
        }

        function openCalendarReminders() {
            openAccountManagementSection('calendarReminders');
        }

        function openAuthorizations() {
            openAccountManagementSection('authorizations');
        }

        function openBankAccounts() {
            openAccountManagementSection('bankAccounts');
        }

        function openMyProfile() {
            focusProfileDetailsSection();
        }

        function openInsurance() {
            openAccountManagementSection('insurance');
        }

        function openPasswordSecurity() {
            openAccountManagementSection('passwordSecurity');
        }

        function openInvestments() {
            openAccountManagementSection('investments');
        }

        function openTaxServices() {
            openAccountManagementSection('taxServices');
        }

        function exportAccountData() {
            showSuccessMessage(' Account data exported successfully!');
        }

        function openProfileSetupModal() {
            focusProfileDetailsSection();
            showSuccessMessage('Scroll down to complete your profile details');
        }

        function toggleBiometricLogin() {
            const toggle = document.getElementById('modalBiometricToggle');
            if (toggle) {
                toggle.classList.toggle('active');
                const enabled = toggle.classList.contains('active');
                showSuccessMessage(`Biometric login ${enabled ? 'enabled' : 'disabled'}`);
            }
        }

        // Initialize app
        document.addEventListener('DOMContentLoaded', function() {
            loadStoredProfileDetails();
            loadPage('landing');
            
            // Check for existing session
            const savedEmail = localStorage.getItem('fintpe_user_email');
            if (savedEmail) {
                isLoggedIn = true;
                userEmail = savedEmail;
                updateNavigationForLogin();
            }
            
            // Mobile Navigation
            const mobileToggle = document.getElementById('mobile-toggle');
            const navMenu = document.getElementById('nav-menu');

            if (mobileToggle && navMenu) {
                mobileToggle.addEventListener('click', () => {
                    navMenu.classList.toggle('active');
                    const icon = mobileToggle.querySelector('i');
                    icon.classList.toggle('fa-bars');
                    icon.classList.toggle('fa-times');
                });
            }

            // Handle email form submission
            const emailForm = document.getElementById('emailForm');
            if (emailForm) {
                emailForm.addEventListener('submit', function(e) {
                    e.preventDefault();
                    const emailInput = document.getElementById('email');
                    if (!emailInput) return;
                    
                    const email = emailInput.value;
                    if (!email || !email.includes('@')) {
                        alert('Please enter a valid email address');
                        return;
                    }

                    userEmail = email;
                    const button = this.querySelector('button[type="submit"]');
                    if (!button) return;
                    
                    const originalText = button.innerHTML;
                    button.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Sending OTP...';
                    button.disabled = true;

                    setTimeout(() => {
                        button.innerHTML = originalText;
                        button.disabled = false;
                        
                        const emailForm = document.getElementById('emailForm');
                        const otpContainer = document.getElementById('otpContainer');
                        const emailDisplay = document.getElementById('emailDisplay');
                        const modalTitle = document.getElementById('modalTitle');
                        const modalSubtitle = document.getElementById('modalSubtitle');
                        
                        if (emailForm) emailForm.style.display = 'none';
                        if (otpContainer) otpContainer.style.display = 'block';
                        if (emailDisplay) emailDisplay.textContent = email;
                        if (modalTitle) modalTitle.textContent = 'Verify OTP';
                        if (modalSubtitle) modalSubtitle.textContent = 'Complete your login';
                        
                        otpSent = true;
                        const firstOtpInput = document.querySelector('.otp-input');
                        if (firstOtpInput) firstOtpInput.focus();
                        
                        alert('OTP sent successfully! Use any 6 digits for demo (e.g., 123456)');
                    }, 2000);
                });
            }

            // OTP Input Handling
            const otpInputs = document.querySelectorAll('.otp-input');
            otpInputs.forEach((input, index) => {
                input.addEventListener('input', function(e) {
                    if (e.target.value.length === 1) {
                        if (index < otpInputs.length - 1) {
                            otpInputs[index + 1].focus();
                        }
                    }
                });

                input.addEventListener('keydown', function(e) {
                    if (e.key === 'Backspace' && e.target.value === '') {
                        if (index > 0) {
                            otpInputs[index - 1].focus();
                        }
                    }
                });
            });

            // Modal close handlers
            window.onclick = function(event) {
                const loginModal = document.getElementById('loginModal');
                const serviceModal = document.getElementById('serviceModal');
                if (event.target == loginModal) {
                    closeLoginModal();
                }
                if (event.target == serviceModal) {
                    closeServiceModal();
                }
            }
        });
    </script>
</body>
</html>
